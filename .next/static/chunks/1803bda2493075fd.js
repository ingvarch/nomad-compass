(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32508,(e,t,r)=>{t.exports=e.r(70821)},41204,e=>{"use strict";var t=e.i(88614),r=e.i(61116),a=e.i(94240);let s=(0,a.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),o=(0,a.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);var n=e.i(99550);let i=({className:e=""})=>{let{effectiveTheme:r,toggleTheme:a}=(0,n.useTheme)();return(0,t.jsx)("button",{onClick:a,className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
        text-gray-500 hover:text-gray-700 hover:bg-gray-100
        dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
        dark:focus:ring-offset-monokai-bg ${e}`,"aria-label":"dark"===r?"Switch to light mode":"Switch to dark mode",children:"dark"===r?(0,t.jsx)(s,{className:"h-5 w-5"}):(0,t.jsx)(o,{className:"h-5 w-5"})})};e.s(["ThemeToggle",0,({className:e=""})=>{let[a,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{s(!0)},[]),a)?(0,t.jsx)(i,{className:e}):(0,t.jsx)("button",{className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
          text-gray-500 hover:text-gray-700 hover:bg-gray-100
          dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
          dark:focus:ring-offset-monokai-bg ${e}`,"aria-label":"Toggle theme",children:(0,t.jsx)(o,{className:"h-5 w-5"})})}],41204)},97658,e=>{"use strict";class t{baseUrl;token;constructor(e,t){console.log("Initializing NomadClient with:",{nomadAddr:e,token:t}),this.baseUrl="/api/nomad",console.log("Using proxy baseUrl:",this.baseUrl),this.token=t}async request(e,t={}){let{params:r,...a}=t,s=`${this.baseUrl}${e}`;if(r){let e=new URLSearchParams;Object.entries(r).forEach(([t,r])=>{e.append(t,String(r))}),s=`${s}?${e.toString()}`}let o={"X-Nomad-Token":this.token,"Content-Type":"application/json",...a.headers};try{let e=await fetch(s,{...a,headers:o});if(!e.ok){let t=await e.json().catch(()=>({}));throw{statusCode:e.status,message:t.error||`API request failed with status ${e.status}`}}if(e.headers.get("content-type")?.includes("application/json"))return await e.json();return{Data:await e.text()}}catch(e){if(e.statusCode)throw e;throw{statusCode:0,message:`Network error: ${e.message}`}}}async getJobs(e){try{let t={};e?t.namespace=e:t.namespace="*";let r=await this.request("/v1/jobs",{method:"GET",params:t});return console.log("Processed jobs:",r),{Jobs:r}}catch(e){throw console.error("Error in getJobs():",e),e}}async getJob(e,t="default"){return this.request(`/v1/job/${e}`,{params:{namespace:t}})}async createJob(e){return this.request("/v1/jobs",{method:"POST",body:JSON.stringify(e)})}async updateJob(e){return this.createJob(e)}async stopJob(e,t="default"){return this.request(`/v1/job/${e}`,{method:"DELETE",params:{namespace:t}})}async deleteJob(e,t="default"){return this.request(`/v1/job/${e}`,{method:"DELETE",params:{namespace:t,purge:"true"}})}async getJobAllocations(e,t="default"){return this.request(`/v1/job/${e}/allocations`,{params:{namespace:t}})}async getAllocation(e){return this.request(`/v1/allocation/${e}`)}async getAllocationLogs(e,t,r,a=!0){return this.request(`/v1/client/fs/logs/${e}`,{method:"GET",params:{task:t,type:r,plain:a}})}async getPlugins(){return this.request("/v1/plugins")}async getNamespaces(){try{return this.request("/v1/namespaces")}catch(e){return console.error("Failed to fetch namespaces:",e),[{Name:"default"}]}}async validateConnection(){try{return await this.request("/v1/agent/self"),!0}catch(e){return!1}}}function r(e,r){return new t(e,r)}e.s(["createNomadClient",()=>r])},31675,e=>{"use strict";var t=e.i(88614),r=e.i(61116),a=e.i(32508),s=e.i(67236),o=e.i(97658),n=e.i(41204);let i=()=>{let[e,i]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),{login:g,isAuthenticated:f}=(0,s.useAuth)(),b=(0,a.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config");if(e.ok){let t=await e.json();t.nomadAddr&&l(t.nomadAddr)}}catch(e){console.error("Error fetching config:",e)}})()},[]),(0,r.useEffect)(()=>{f&&b.push("/dashboard")},[f,b]);let k=async t=>{t.preventDefault(),h(null),u(!0);try{if(!e.trim())throw Error("Token is required");if(!c.trim())throw Error("Nomad address is required");let t=c.trim();t.startsWith("http://")||t.startsWith("https://")||(t=`http://${t}`);let r=(0,o.createNomadClient)(t,e);if(!await r.validateConnection())throw Error("Failed to connect to Nomad. Please check your token and address.");g(e,t),b.push("/dashboard")}catch(e){h(e.message)}finally{u(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-monokai-bg relative",children:[(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)(n.ThemeToggle,{})}),(0,t.jsxs)("div",{className:"max-w-md w-full p-6 bg-white dark:bg-monokai-surface rounded-lg shadow-md",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-monokai-text",children:"Nomad Compass"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-monokai-muted",children:"Sign in to manage your Nomad cluster"})]}),m&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 dark:bg-monokai-bg dark:text-monokai-red rounded-md text-sm",children:m}),(0,t.jsxs)("form",{onSubmit:k,children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 dark:text-monokai-text mb-1",children:"Nomad Token"}),(0,t.jsx)("input",{id:"token",type:"password",value:e,onChange:e=>i(e.target.value),placeholder:"Enter your Nomad token",className:"w-full p-2 border border-gray-300 dark:border-monokai-muted rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-monokai-blue bg-white dark:bg-monokai-bg text-gray-900 dark:text-monokai-text",disabled:d})]}),(0,t.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 dark:bg-monokai-blue dark:hover:bg-blue-500 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-monokai-surface transition-colors disabled:opacity-50",disabled:d,children:d?"Connecting...":"Connect to Nomad"})]})]})]})};function c(){let{isAuthenticated:e}=(0,s.useAuth)(),o=(0,a.useRouter)();return(0,r.useEffect)(()=>{e&&o.push("/dashboard")},[e,o]),(0,t.jsx)(i,{})}e.s(["default",()=>c],31675)}]);