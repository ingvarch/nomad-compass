(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32508,(e,t,r)=>{t.exports=e.r(70821)},41204,e=>{"use strict";var t=e.i(88614),r=e.i(61116),a=e.i(94240);let s=(0,a.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),n=(0,a.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);var o=e.i(99550);let l=({className:e=""})=>{let{effectiveTheme:r,toggleTheme:a}=(0,o.useTheme)();return(0,t.jsx)("button",{onClick:a,className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
        text-gray-500 hover:text-gray-700 hover:bg-gray-100
        dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
        dark:focus:ring-offset-monokai-bg ${e}`,"aria-label":"dark"===r?"Switch to light mode":"Switch to dark mode",children:"dark"===r?(0,t.jsx)(s,{className:"h-5 w-5"}):(0,t.jsx)(n,{className:"h-5 w-5"})})};e.s(["ThemeToggle",0,({className:e=""})=>{let[a,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{s(!0)},[]),a)?(0,t.jsx)(l,{className:e}):(0,t.jsx)("button",{className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
          text-gray-500 hover:text-gray-700 hover:bg-gray-100
          dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
          dark:focus:ring-offset-monokai-bg ${e}`,"aria-label":"Toggle theme",children:(0,t.jsx)(n,{className:"h-5 w-5"})})}],41204)},97658,e=>{"use strict";class t{baseUrl;token;constructor(e,t){console.log("Initializing NomadClient with:",{nomadAddr:e,token:t}),this.baseUrl="/api/nomad",console.log("Using proxy baseUrl:",this.baseUrl),this.token=t}async request(e,t={}){let{params:r,...a}=t,s=`${this.baseUrl}${e}`;if(r){let e=new URLSearchParams;Object.entries(r).forEach(([t,r])=>{e.append(t,String(r))}),s=`${s}?${e.toString()}`}let n={"X-Nomad-Token":this.token,"Content-Type":"application/json",...a.headers};try{let e=await fetch(s,{...a,headers:n});if(!e.ok){let t=await e.json().catch(()=>({}));throw{statusCode:e.status,message:t.error||`API request failed with status ${e.status}`}}if(e.headers.get("content-type")?.includes("application/json"))return await e.json();return{Data:await e.text()}}catch(e){if(e.statusCode)throw e;throw{statusCode:0,message:`Network error: ${e.message}`}}}async getJobs(e){try{let t={};e?t.namespace=e:t.namespace="*";let r=await this.request("/v1/jobs",{method:"GET",params:t});return console.log("Processed jobs:",r),{Jobs:r}}catch(e){throw console.error("Error in getJobs():",e),e}}async getJob(e,t="default"){return this.request(`/v1/job/${e}`,{params:{namespace:t}})}async createJob(e){return this.request("/v1/jobs",{method:"POST",body:JSON.stringify(e)})}async updateJob(e){return this.createJob(e)}async stopJob(e,t="default"){return this.request(`/v1/job/${e}`,{method:"DELETE",params:{namespace:t}})}async deleteJob(e,t="default"){return this.request(`/v1/job/${e}`,{method:"DELETE",params:{namespace:t,purge:"true"}})}async getJobAllocations(e,t="default"){return this.request(`/v1/job/${e}/allocations`,{params:{namespace:t}})}async getAllocation(e){return this.request(`/v1/allocation/${e}`)}async getAllocationLogs(e,t,r,a=!0){return this.request(`/v1/client/fs/logs/${e}`,{method:"GET",params:{task:t,type:r,plain:a}})}async getPlugins(){return this.request("/v1/plugins")}async getNamespaces(){try{return this.request("/v1/namespaces")}catch(e){return console.error("Failed to fetch namespaces:",e),[{Name:"default"}]}}async validateConnection(){try{return await this.request("/v1/agent/self"),!0}catch(e){return!1}}}function r(e,r){return new t(e,r)}e.s(["createNomadClient",()=>r])},24346,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return i},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return l}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});function n(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function l(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,o(e));else t.set(r,o(a));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},88764,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return l},formatWithValidation:function(){return d},urlObjectKeys:function(){return i}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(33398)._(e.r(24346)),o=/https?|ftp|gopher|file/;function l(e){let{auth:t,hostname:r}=e,a=e.protocol||"",s=e.pathname||"",l=e.hash||"",i=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),i&&"object"==typeof i&&(i=String(n.urlQueryToSearchParams(i)));let u=e.search||i&&`?${i}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||o.test(a))&&!1!==d?(d="//"+(d||""),s&&"/"!==s[0]&&(s="/"+s)):d||(d=""),l&&"#"!==l[0]&&(l="#"+l),u&&"?"!==u[0]&&(u="?"+u),s=s.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${a}${d}${s}${u}${l}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return l(e)}},45157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=e.r(61116);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=n(e,a)),t&&(s.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return y},NormalizeError:function(){return x},PageNotFoundError:function(){return k},SP:function(){return p},ST:function(){return f},WEB_VITALS:function(){return n},execOnce:function(){return o},getDisplayName:function(){return c},getLocationOrigin:function(){return d},getURL:function(){return u},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return b},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return j}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let l=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>l.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=d();return e.substring(t.length)}function c(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function b(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await b(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&m(r))return a;if(!a)throw Object.defineProperty(Error(`"${c(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="undefined"!=typeof performance,f=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class x extends Error{}class k extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},85178,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let a=e.r(40470),s=e.r(90056);function n(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},52607,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},20877,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return g},useLinkStatus:function(){return k}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(33398),o=e.r(88614),l=n._(e.r(61116)),i=e.r(88764),d=e.r(90110),u=e.r(45157),c=e.r(40470),m=e.r(65433);e.r(4945);let h=e.r(93066),b=e.r(85178),p=e.r(89859);function f(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function g(t){var r;let a,s,n,[i,g]=(0,l.useOptimistic)(h.IDLE_LINK_STATUS),k=(0,l.useRef)(null),{href:y,as:v,children:j,prefetch:N=null,passHref:C,replace:w,shallow:P,scroll:M,onClick:T,onMouseEnter:E,onTouchStart:$,legacyBehavior:A=!1,onNavigate:S,ref:R,unstable_dynamicOnHover:D,...G}=t;a=j,A&&("string"==typeof a||"number"==typeof a)&&(a=(0,o.jsx)("a",{children:a}));let O=l.default.useContext(d.AppRouterContext),_=!1!==N,L=!1!==N?null===(r=N)||"auto"===r?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:I,as:U}=l.default.useMemo(()=>{let e=f(y);return{href:e,as:v?f(v):e}},[y,v]);if(A){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=l.default.Children.only(a)}let V=A?s&&"object"==typeof s&&s.ref:R,B=l.default.useCallback(e=>(null!==O&&(k.current=(0,h.mountLinkInstance)(e,I,O,L,_,g)),()=>{k.current&&((0,h.unmountLinkForCurrentNavigation)(k.current),k.current=null),(0,h.unmountPrefetchableInstance)(e)}),[_,I,O,L,g]),q={ref:(0,u.useMergedRef)(B,V),onClick(t){A||"function"!=typeof T||T(t),A&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!O||t.defaultPrevented||function(t,r,a,s,n,o,i){if("undefined"!=typeof window){let d,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,b.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:c}=e.r(47890);l.default.startTransition(()=>{c(a||r,n?"replace":"push",o??!0,s.current)})}}(t,I,U,k,w,M,S)},onMouseEnter(e){A||"function"!=typeof E||E(e),A&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),O&&_&&(0,h.onNavigationIntent)(e.currentTarget,!0===D)},onTouchStart:function(e){A||"function"!=typeof $||$(e),A&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),O&&_&&(0,h.onNavigationIntent)(e.currentTarget,!0===D)}};return(0,c.isAbsoluteUrl)(U)?q.href=U:A&&!C&&("a"!==s.type||"href"in s.props)||(q.href=(0,m.addBasePath)(U)),n=A?l.default.cloneElement(s,q):(0,o.jsx)("a",{...G,...q,children:a}),(0,o.jsx)(x.Provider,{value:i,children:n})}e.r(52607);let x=(0,l.createContext)(h.IDLE_LINK_STATUS),k=()=>(0,l.useContext)(x);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},54968,e=>{"use strict";var t=e.i(88614),r=e.i(61116),a=e.i(32508),s=e.i(67236),n=e.i(20877),o=e.i(41204);let l=()=>{let[e,l]=(0,r.useState)(!1),i=(0,a.usePathname)(),{logout:d,nomadAddr:u}=(0,s.useAuth)(),c=e=>i===e||i?.startsWith(`${e}/`);return(0,t.jsxs)("nav",{className:"bg-white dark:bg-monokai-bg shadow-sm border-b border-gray-200 dark:border-monokai-surface",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)("span",{className:"text-blue-600 dark:text-monokai-blue font-bold text-xl",children:"Nomad Compass"})}),(0,t.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[(0,t.jsx)(n.default,{href:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${c("/dashboard")?"border-blue-500 text-gray-900 dark:border-monokai-blue dark:text-monokai-text":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-monokai-muted dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Dashboard"}),(0,t.jsx)(n.default,{href:"/jobs",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${c("/jobs")?"border-blue-500 text-gray-900 dark:border-monokai-blue dark:text-monokai-text":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-monokai-muted dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Jobs"})]})]}),(0,t.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:(0,t.jsx)("div",{className:"ml-3 relative",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[u&&(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-monokai-muted hidden md:inline-block",children:u}),(0,t.jsx)(o.ThemeToggle,{}),(0,t.jsx)("button",{onClick:d,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 dark:bg-monokai-red dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-monokai-bg",children:"Sign Out"})]})})}),(0,t.jsxs)("div",{className:"-mr-2 flex items-center sm:hidden",children:[(0,t.jsx)(o.ThemeToggle,{className:"mr-2"}),(0,t.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>l(!e),children:[(0,t.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,t.jsx)("svg",{className:`${e?"hidden":"block"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),(0,t.jsx)("svg",{className:`${e?"block":"hidden"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]})]})}),(0,t.jsxs)("div",{className:`${e?"block":"hidden"} sm:hidden`,id:"mobile-menu",children:[(0,t.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,t.jsx)(n.default,{href:"/dashboard",className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${c("/dashboard")?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-monokai-surface dark:border-monokai-blue dark:text-monokai-blue":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 dark:text-monokai-muted dark:hover:bg-monokai-surface dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Dashboard"}),(0,t.jsx)(n.default,{href:"/jobs",className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${c("/jobs")?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-monokai-surface dark:border-monokai-blue dark:text-monokai-blue":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 dark:text-monokai-muted dark:hover:bg-monokai-surface dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Jobs"})]}),(0,t.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-200 dark:border-monokai-surface",children:[(0,t.jsx)("div",{className:"flex items-center px-4",children:(0,t.jsx)("div",{className:"ml-3",children:u&&(0,t.jsx)("div",{className:"text-sm font-medium text-gray-500 dark:text-monokai-muted",children:u})})}),(0,t.jsx)("div",{className:"mt-3 space-y-1",children:(0,t.jsx)("button",{onClick:d,className:"block w-full text-left px-4 py-2 text-base font-medium text-red-600 hover:bg-gray-100 dark:text-monokai-red dark:hover:bg-monokai-surface",children:"Sign Out"})})]})]})]})};e.s(["default",0,({children:e})=>{let{isAuthenticated:n}=(0,s.useAuth)();return((0,a.useRouter)(),(0,r.useEffect)(()=>{n||(console.log("Not authenticated, redirecting to login..."),window.location.href="/auth/login")},[n]),n)?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-monokai-bg",children:[(0,t.jsx)(l,{}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e})]}):(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 dark:bg-monokai-bg",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-monokai-blue"})})}],54968)},94823,39789,e=>{"use strict";var t=e.i(94240);let r=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>r],94823);let a=(0,t.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],39789)},85572,92874,41347,92997,94466,32872,43837,e=>{"use strict";var t=e.i(61116),r=e.i(32508),a=e.i(67236),s=e.i(97658);function n(e){let t=e.taskGroups.map(e=>{let t,r,a;e.enableNetwork?(t={Mode:e.networkMode||"bridge",DynamicPorts:[],ReservedPorts:[]},e.ports.forEach(e=>{if(""===e.label.trim())return;let r={Label:e.label,...e.to?{To:e.to}:{}};e.static?(r.Value=e.value,t.ReservedPorts.push(r)):t.DynamicPorts.push(r)})):t=void 0;let s=(r={},e.envVars&&e.envVars.length>0&&e.envVars.forEach(e=>{""!==e.key.trim()&&(r[e.key]=e.value)}),a={image:e.image},e.usePrivateRegistry&&e.dockerAuth&&(a.auth={username:e.dockerAuth.username,password:e.dockerAuth.password}),{Name:e.name,Driver:e.plugin,Config:a,Env:r,Resources:{CPU:e.resources.CPU,MemoryMB:e.resources.MemoryMB,DiskMB:e.resources.DiskMB||500}}),n={Name:e.name,Count:e.count,Tasks:[s]};if(t&&(t.DynamicPorts.length>0||t.ReservedPorts.length>0)&&(n.Networks=[t]),e.enableHealthCheck&&e.healthCheck){let t=e.healthCheck;n.Services=[{Name:e.name,TaskName:e.name,AddressMode:"auto",PortLabel:e.ports.length>0&&e.ports[0].label?e.ports[0].label:"http",Provider:"nomad",Checks:[{Type:t.type,..."http"===t.type?{Path:t.path}:{},..."script"===t.type?{Command:t.command}:{},Interval:1e9*t.interval,Timeout:1e9*t.timeout,CheckRestart:{Limit:3,Grace:1e9*(t.initialDelay||5),IgnoreWarnings:!1}}]}]}return n});return{Job:{ID:e.name,Name:e.name,Namespace:e.namespace,Type:"service",Datacenters:e.datacenters,TaskGroups:t}}}function o(e,t){let r=n(t);return e&&(r.Job.ID=e.ID,r.Job.Name=e.Name,e.Meta&&(r.Job.Meta=e.Meta),e.Constraints&&(r.Job.Constraints=e.Constraints),void 0!==e.Priority&&(r.Job.Priority=e.Priority),e.TaskGroups&&e.TaskGroups.length>0&&r.Job.TaskGroups.forEach(t=>{let r=e.TaskGroups.find(e=>e.Name===t.Name);r&&(r.Meta&&(t.Meta=r.Meta),r.Constraints&&(t.Constraints=r.Constraints))})),r}function l(e){let t=e.TaskGroups.map(e=>{let t=e.Tasks[0],r=t.Config||{},a=t.Env?Object.entries(t.Env).map(([e,t])=>({key:e,value:t})).sort((e,t)=>e.key.localeCompare(t.key)):[],s=!!(r.auth&&r.auth.username&&r.auth.password),n=e.Networks&&e.Networks.length>0?e.Networks[0]:null,o=!!n,l=n&&n.Mode?n.Mode:"none",i=[];n&&(n.DynamicPorts&&n.DynamicPorts.length>0&&(i=[...i,...n.DynamicPorts.map(e=>({label:e.Label,value:0,to:e.To||0,static:!1}))]),n.ReservedPorts&&n.ReservedPorts.length>0&&(i=[...i,...n.ReservedPorts.map(e=>({label:e.Label,value:e.Value,to:e.To||e.Value,static:!0}))])),0===i.length&&o&&(i=[{label:"http",value:8080,to:8080,static:!1}]);let d=e.Services||[],u=d.length>0?d[0]:null,c=u&&u.Checks&&u.Checks.length>0?u.Checks[0]:null,m=c?{type:c.Type||"http",path:"http"===c.Type?c.Path:"/health",command:"script"===c.Type?c.Command:"",interval:c?Math.floor(c.Interval/1e9):30,timeout:c?Math.floor(c.Timeout/1e9):5,initialDelay:c.CheckRestart?Math.floor(c.CheckRestart.Grace/1e9):5,failuresBeforeUnhealthy:3,successesBeforeHealthy:2}:void 0;return{name:e.Name,count:e.Count||1,image:r.image||"",plugin:t.Driver||"podman",resources:{CPU:t.Resources?.CPU||100,MemoryMB:t.Resources?.MemoryMB||256,DiskMB:t.Resources?.DiskMB||500},envVars:a,usePrivateRegistry:s,dockerAuth:s?{username:r.auth.username,password:r.auth.password}:void 0,enableNetwork:o,networkMode:l,ports:i,enableHealthCheck:!!c,healthCheck:m}});return{name:e.Name,namespace:e.Namespace||"default",taskGroups:t,serviceProvider:"nomad",datacenters:e.Datacenters||["dc1"]}}function i(e){return/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(e)}e.s(["convertJobToFormData",()=>l,"createJobSpec",()=>n,"updateJobSpec",()=>o],92874);let d={name:"",count:1,image:"",plugin:"podman",resources:{CPU:100,MemoryMB:256,DiskMB:500},envVars:[],usePrivateRegistry:!1,dockerAuth:{username:"",password:""},enableNetwork:!1,networkMode:"bridge",ports:[{label:"http",value:8080,to:8080,static:!1}],enableHealthCheck:!1,healthCheck:{type:"http",path:"/health",interval:30,timeout:5,initialDelay:5,failuresBeforeUnhealthy:3,successesBeforeHealthy:2}},u={name:"",namespace:"default",taskGroups:[{...d}],serviceProvider:"nomad",datacenters:["dc1"]};function c(){let e=(0,r.useRouter)(),{token:o,nomadAddr:l}=(0,a.useAuth)(),[c,m]=(0,t.useState)(!1),[h,b]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[g,x]=(0,t.useState)(["default"]),[k,y]=(0,t.useState)(!0),[v,j]=(0,t.useState)(!0),[N,C]=(0,t.useState)(u);(0,t.useEffect)(()=>{(async()=>{if(!o||!l)return y(!1);try{let e=(0,s.createNomadClient)(l,o),t=await e.getNamespaces();if(t&&Array.isArray(t)){let e=t.map(e=>e.Name);x(e.length>0?e:["default"])}}catch(e){console.error("Failed to fetch namespaces:",e),x(["default"])}finally{y(!1)}})()},[o,l]);let w=e=>{let t=[...N.taskGroups],r=t[e].envVars||[];t[e]={...t[e],envVars:[...r,{key:"",value:""}]},C({...N,taskGroups:t})};(0,t.useEffect)(()=>{N.taskGroups.forEach((e,t)=>{e.envVars&&0!==e.envVars.length||w(t)})},[N,w]);let P=async t=>{t.preventDefault(),b(null),f(null),m(!0);try{if(!o||!l)throw Error("Authentication required");if(!N.name.trim())throw Error("Job name is required");if(!i(N.name))throw j(!1),Error("Job name must start with a letter or number and contain only letters, numbers, hyphens, underscores, and dots");for(let e=0;e<N.taskGroups.length;e++){let t=N.taskGroups[e];if(!t.name.trim())throw Error(`Group ${e+1} name is required`);if(!t.image.trim())throw Error(`Image for group ${e+1} is required`);if(t.usePrivateRegistry){if(!t.dockerAuth?.username)throw Error(`Username is required for private registry in group ${e+1}`);if(!t.dockerAuth?.password)throw Error(`Password is required for private registry in group ${e+1}`)}if(t.envVars&&(t.envVars=t.envVars.filter(e=>""!==e.key.trim()||""!==e.value.trim())),t.enableNetwork&&t.ports.length>0)for(let r=0;r<t.ports.length;r++){let a=t.ports[r];if(!a.label)throw Error(`Port label is required for port ${r+1} in group ${e+1}`);if(a.static&&(!a.value||a.value<=0||a.value>65535))throw Error(`Valid port value (1-65535) is required for static port ${r+1} in group ${e+1}`)}}let t=n(N);console.log("Job spec:",JSON.stringify(t,null,2));let r=(0,s.createNomadClient)(l,o);await r.createJob(t),f(`Job "${N.name}" created successfully in namespace "${N.namespace}"!`),setTimeout(()=>{e.push("/jobs")},2e3)}catch(e){console.error("Failed to create job:",e),b("object"==typeof e&&null!==e&&"message"in e?e.message:"Failed to create job. Please check your inputs and try again.")}finally{m(!1)}};return{formData:N,isLoading:c,isLoadingNamespaces:k,isNameValid:v,error:h,success:p,namespaces:g,handleInputChange:e=>{let{name:t,value:r,type:a}=e.target,s="number"===a?Number(r):r;"name"===t&&j(i(r)),"datacenters"===t?C({...N,datacenters:r.split(",").map(e=>e.trim())}):C({...N,[t]:s})},handleGroupInputChange:(e,t)=>{let{name:r,value:a,type:s}=t.target,n="number"===s?Number(a):a,o=[...N.taskGroups],l=r.split(".");if(1===l.length)o[e]={...o[e],[r]:n};else if(2===l.length&&"resources"===l[0]){let t=l[1];o[e]={...o[e],resources:{...o[e].resources,[t]:parseInt(a,10)}}}else if(2===l.length&&"dockerAuth"===l[0]){let t=l[1];o[e]={...o[e],dockerAuth:{...o[e].dockerAuth,[t]:a}}}else if(2===l.length&&"healthCheck"===l[0]){let t=l[1];o[e]={...o[e],healthCheck:{...o[e].healthCheck,[t]:"number"===s?parseInt(a,10):a}}}C({...N,taskGroups:o})},handleSelectChange:(e,t)=>{let{name:r,value:a}=t.target,s=[...N.taskGroups];s[e]={...s[e],[r]:a},C({...N,taskGroups:s})},handleGroupCheckboxChange:(e,t)=>{let{name:r,checked:a}=t.target,s=[...N.taskGroups];s[e]={...s[e],[r]:a},C({...N,taskGroups:s})},handleEnvVarChange:(e,t,r,a)=>{let s=[...N.taskGroups],n=[...s[e].envVars||[]];n[t]||(n[t]={key:"",value:""}),n[t]={...n[t],[r]:a},s[e]={...s[e],envVars:n},C({...N,taskGroups:s})},addEnvVar:w,removeEnvVar:(e,t)=>{let r=[...N.taskGroups],a=[...r[e].envVars||[]];a.length<=1?r[e]={...r[e],envVars:[]}:(a.splice(t,1),r[e]={...r[e],envVars:a}),C({...N,taskGroups:r})},handlePortChange:(e,t,r,a)=>{let s=[...N.taskGroups],n=[...s[e].ports];if("static"===r){let e="true"===a;n[t]={...n[t],[r]:e},e&&!n[t].value&&(n[t].value=8080+t)}else"label"===r?n[t]={...n[t],[r]:a}:n[t]={...n[t],[r]:parseInt(a,10)||0};s[e]={...s[e],ports:n},C({...N,taskGroups:s})},addPort:e=>{let t=[...N.taskGroups];t[e]={...t[e],ports:[...t[e].ports,{label:"",value:0,to:8080,static:!1}]},C({...N,taskGroups:t})},removePort:(e,t)=>{let r=[...N.taskGroups];if(r[e].ports.length<=1){r[e]={...r[e],ports:[{label:"",value:0,to:0,static:!1}]};return}let a=[...r[e].ports];a.splice(t,1),r[e]={...r[e],ports:a},C({...N,taskGroups:r})},handleHealthCheckChange:(e,t,r)=>{let a=[...N.taskGroups];a[e].healthCheck||(a[e].healthCheck={...d.healthCheck}),"type"===t?a[e]={...a[e],healthCheck:{...a[e].healthCheck,[t]:r}}:a[e]={...a[e],healthCheck:{...a[e].healthCheck,[t]:"string"==typeof r?r:parseInt(String(r),10)||0}},C({...N,taskGroups:a})},addTaskGroup:()=>{let e={...d,name:`${N.name?N.name+"-":""}group-${N.taskGroups.length+1}`};C({...N,taskGroups:[...N.taskGroups,e]})},removeTaskGroup:e=>{if(N.taskGroups.length<=1)return;let t=[...N.taskGroups];t.splice(e,1),C({...N,taskGroups:t})},handleSubmit:P}}e.s(["defaultTaskGroupData",0,d,"useJobForm",()=>c],85572);var m=e.i(88614),h=e.i(20877);e.s(["default",0,({title:e,error:t,success:r,isLoading:a,onSubmit:s,submitButtonText:n,children:o,cancelHref:l})=>(0,m.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:e}),t&&(0,m.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:t}),r&&(0,m.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md text-sm",children:r}),(0,m.jsxs)("form",{onSubmit:s,children:[o,(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("button",{type:"submit",className:`py-2 px-4 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors ${a?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:a,children:a?"Processing...":n}),l&&(0,m.jsx)(h.default,{href:l,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]})]})]})})],41347);let b=({id:e,name:t,label:r,type:a,value:s,onChange:n,disabled:o=!1,required:l=!1,placeholder:i="",min:d,max:u,className:c="",helpText:h,isInvalid:b=!1,errorMessage:p,options:f=[]})=>{let g=`w-full p-2 border ${b?"border-red-500 dark:border-monokai-red":"border-gray-300 dark:border-monokai-muted"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-monokai-blue bg-white dark:bg-monokai-surface text-gray-900 dark:text-monokai-text`;return"checkbox"===a?(0,m.jsxs)("div",{className:`flex items-center ${c}`,children:[(0,m.jsx)("input",{id:e,name:t,type:"checkbox",checked:s,onChange:n,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded dark:border-monokai-muted dark:bg-monokai-surface",disabled:o,required:l}),(0,m.jsx)("label",{htmlFor:e,className:"ml-2 block text-sm font-medium text-gray-700 dark:text-monokai-text",children:r}),h&&(0,m.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-monokai-muted",children:h})]}):"select"===a?(0,m.jsxs)("div",{className:`mb-4 ${c}`,children:[(0,m.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-monokai-text mb-1",children:r}),(0,m.jsx)("select",{id:e,name:t,value:s,onChange:n,className:g,disabled:o,required:l,children:f.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))}),h&&(0,m.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-monokai-muted",children:h}),b&&p&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-monokai-red",children:p})]}):(0,m.jsxs)("div",{className:`mb-4 ${c}`,children:[(0,m.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-monokai-text mb-1",children:r}),(0,m.jsx)("input",{id:e,name:t,type:a,value:s,onChange:n,placeholder:i,className:g,disabled:o,required:l,min:d,max:u}),h&&(0,m.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-monokai-muted",children:h}),b&&p&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-monokai-red",children:p})]})};e.s(["default",0,b],92997);var p=e.i(94240);let f=(0,p.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),g=(0,p.default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),x=({title:e,children:r,defaultExpanded:a=!0,isRemovable:s=!1,onRemove:n,isPrimary:o=!1,isLoading:l=!1,className:i=""})=>{let[d,u]=(0,t.useState)(!a);return(0,m.jsxs)("div",{className:`border rounded-lg p-4 bg-gray-50 dark:bg-monokai-bg dark:border-monokai-muted relative ${i}`,children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("button",{type:"button",onClick:()=>u(!d),className:"mr-2 text-gray-500 hover:text-gray-700 dark:text-monokai-muted dark:hover:text-monokai-text focus:outline-none",children:(0,m.jsx)(f,{className:`h-5 w-5 transition-transform ${d?"":"transform rotate-90"}`})}),(0,m.jsxs)("h4",{className:"text-lg font-medium text-gray-900 dark:text-monokai-text",children:[e,o&&(0,m.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-monokai-surface dark:text-monokai-blue px-2 py-1 rounded",children:"Primary"})]})]}),s&&n&&(0,m.jsx)("button",{type:"button",onClick:n,className:"text-red-600 hover:text-red-800 dark:text-monokai-red dark:hover:text-red-400 focus:outline-none",disabled:l,children:(0,m.jsx)(g,{className:"h-5 w-5"})})]}),(0,m.jsx)("div",{className:`transition-all duration-200 overflow-hidden ${d?"max-h-0 opacity-0 invisible":"max-h-full opacity-100 visible"}`,children:r})]})},k=({dockerAuth:e,onInputChange:t,isLoading:r,groupIndex:a})=>(0,m.jsxs)("div",{className:"mb-6 p-4 border border-gray-200 rounded-md bg-gray-50",children:[(0,m.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Registry Credentials"}),(0,m.jsx)(b,{id:`group-${a}-dockerAuth.username`,name:"dockerAuth.username",label:"Username",type:"text",value:e?.username||"",onChange:t,disabled:r,required:!0}),(0,m.jsx)(b,{id:`group-${a}-dockerAuth.password`,name:"dockerAuth.password",label:"Password",type:"password",value:e?.password||"",onChange:t,disabled:r,required:!0})]}),y=({resources:e,onInputChange:t,isLoading:r,groupIndex:a})=>(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Resources"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)(b,{id:`group-${a}-resources.CPU`,name:"resources.CPU",label:"CPU (MHz)",type:"number",value:e.CPU,onChange:t,min:100,disabled:r}),(0,m.jsx)(b,{id:`group-${a}-resources.MemoryMB`,name:"resources.MemoryMB",label:"Memory (MB)",type:"number",value:e.MemoryMB,onChange:t,min:32,disabled:r}),(0,m.jsx)(b,{id:`group-${a}-resources.DiskMB`,name:"resources.DiskMB",label:"Disk (MB)",type:"number",value:e.DiskMB,onChange:t,min:10,disabled:r})]})]});var v=e.i(94823),j=e.i(39789);let N=({envVars:e,onEnvVarChange:r,onAddEnvVar:a,onRemoveEnvVar:s,isLoading:n})=>{let[o,l]=(0,t.useState)({}),i=e=>{l(t=>({...t,[e]:!t[e]}))};return(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,m.jsx)("h5",{className:"text-md font-medium text-gray-700",children:"Environment Variables"})}),0===e.length?(0,m.jsxs)("div",{className:"flex space-x-2 mb-2 items-center",children:[(0,m.jsx)("input",{type:"text",value:"",onChange:e=>r(0,"key",e.target.value),placeholder:"KEY",className:"w-1/3 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n}),(0,m.jsxs)("div",{className:"relative w-1/2",children:[(0,m.jsx)("input",{type:"password",value:"",onChange:e=>r(0,"value",e.target.value),placeholder:"value",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n}),(0,m.jsx)("button",{type:"button",onClick:()=>i(0),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",disabled:n,children:(0,m.jsx)(v.Eye,{size:16})})]}),(0,m.jsx)("button",{type:"button",onClick:a,className:"inline-flex items-center p-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:n,children:"Add"})]}):e.map((t,l)=>(0,m.jsxs)("div",{className:"flex space-x-2 mb-2 items-center",children:[(0,m.jsx)("input",{type:"text",value:t.key,onChange:e=>r(l,"key",e.target.value),placeholder:"KEY",className:"w-1/3 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n}),(0,m.jsxs)("div",{className:"relative w-1/2",children:[(0,m.jsx)("input",{type:o[l]?"text":"password",value:t.value,onChange:e=>r(l,"value",e.target.value),placeholder:"value",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n}),(0,m.jsx)("button",{type:"button",onClick:()=>i(l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",disabled:n,children:o[l]?(0,m.jsx)(j.EyeOff,{size:16}):(0,m.jsx)(v.Eye,{size:16})})]}),l===e.length-1?(0,m.jsx)("button",{type:"button",onClick:a,className:"flex justify-center items-center p-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:n,children:"Add"}):(0,m.jsx)("button",{type:"button",onClick:()=>s(l),className:"inline-flex items-center p-2 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 w-16",disabled:n,children:(0,m.jsx)(g,{size:16,className:"mx-auto"})}),l===e.length-1?null:(0,m.jsx)("div",{className:"w-16"})]},l))]})},C=({ports:e,onPortChange:t,onAddPort:r,onRemovePort:a,isLoading:s})=>(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,m.jsx)("h6",{className:"text-sm font-medium text-gray-700",children:"Ports"})}),0===e.length?(0,m.jsxs)("div",{className:"flex flex-wrap items-end gap-2 mb-2 p-2 border rounded-md bg-white",children:[(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Label"}),(0,m.jsx)("input",{type:"text",value:"",onChange:e=>t(0,"label",e.target.value),placeholder:"http",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Port Type"}),(0,m.jsxs)("select",{value:"false",onChange:e=>t(0,"static",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s,children:[(0,m.jsx)("option",{value:"false",children:"Dynamic"}),(0,m.jsx)("option",{value:"true",children:"Static"})]})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Host Port"}),(0,m.jsx)("span",{className:"block p-2 border bg-gray-100 text-gray-500 rounded-md h-10",children:"Dynamic"})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Container Port"}),(0,m.jsx)("input",{type:"number",value:"8080",onChange:e=>t(0,"to",e.target.value),placeholder:"8080",min:"1",max:"65535",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})]}),(0,m.jsx)("div",{className:"h-10 flex items-center",children:(0,m.jsx)("button",{type:"button",onClick:r,className:"flex justify-center items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:s,children:"Add"})})]}):e.map((n,o)=>(0,m.jsxs)("div",{className:"flex flex-wrap items-end gap-2 mb-2 p-2 border rounded-md bg-white",children:[(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Label"}),(0,m.jsx)("input",{type:"text",value:n.label,onChange:e=>t(o,"label",e.target.value),placeholder:"http",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Port Type"}),(0,m.jsxs)("select",{value:n.static?"true":"false",onChange:e=>t(o,"static",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s,children:[(0,m.jsx)("option",{value:"false",children:"Dynamic"}),(0,m.jsx)("option",{value:"true",children:"Static"})]})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Host Port"}),n.static?(0,m.jsx)("input",{type:"number",value:n.value,onChange:e=>t(o,"value",e.target.value),placeholder:"8080",min:"1",max:"65535",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s}):(0,m.jsx)("span",{className:"block p-2 border bg-gray-100 text-gray-500 rounded-md h-10",children:"Dynamic"})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Container Port"}),(0,m.jsx)("input",{type:"number",value:n.to,onChange:e=>t(o,"to",e.target.value),placeholder:"8080",min:"1",max:"65535",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})]}),(0,m.jsx)("div",{className:"h-10 flex items-center",children:o===e.length-1?(0,m.jsx)("button",{type:"button",onClick:r,className:"flex justify-center items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:s,children:"Add"}):(0,m.jsx)("button",{type:"button",onClick:()=>a(o),className:"flex justify-center items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 w-16",disabled:s,children:(0,m.jsx)(g,{size:16})})})]},o))]}),w=({enableNetwork:e,networkMode:t,ports:r,onInputChange:a,onCheckboxChange:s,onPortChange:n,onAddPort:o,onRemovePort:l,isLoading:i,groupIndex:d})=>(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex items-center mb-2",children:(0,m.jsx)(b,{id:`group-${d}-enableNetwork`,name:"enableNetwork",label:"Enable Network Configuration",type:"checkbox",value:e,onChange:s,disabled:i,className:"mb-0"})}),e&&(0,m.jsxs)("div",{className:"border p-4 rounded-md bg-white",children:[(0,m.jsx)(b,{id:`group-${d}-networkMode`,name:"networkMode",label:"Network Mode",type:"select",value:t,onChange:a,disabled:i,helpText:"Select the container network mode. 'Bridge' is recommended for service discovery.",options:[{value:"bridge",label:"Bridge"},{value:"host",label:"Host"},{value:"none",label:"None"}]}),(0,m.jsx)(C,{ports:r,onPortChange:n,onAddPort:o,onRemovePort:l,isLoading:i})]})]}),P=({enableHealthCheck:e,healthCheck:t,onCheckboxChange:r,onHealthCheckChange:a,isLoading:s,groupIndex:n})=>t?(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex items-center mb-2",children:(0,m.jsx)(b,{id:`group-${n}-enableHealthCheck`,name:"enableHealthCheck",label:"Enable Health Check",type:"checkbox",value:e,onChange:r,disabled:s,className:"mb-0"})}),e&&(0,m.jsx)("div",{className:"border p-4 rounded-md bg-white",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsx)(b,{id:`group-${n}-healthCheck-type`,name:"healthCheck.type",label:"Check Type",type:"select",value:t.type,onChange:e=>a("type",e.target.value),disabled:s,options:[{value:"http",label:"HTTP"},{value:"tcp",label:"TCP"},{value:"script",label:"Script"}]}),"http"===t.type&&(0,m.jsx)(b,{id:`group-${n}-healthCheck-path`,name:"healthCheck.path",label:"HTTP Path",type:"text",value:t.path||"",onChange:e=>a("path",e.target.value),placeholder:"/health",disabled:s}),"script"===t.type&&(0,m.jsx)(b,{id:`group-${n}-healthCheck-command`,name:"healthCheck.command",label:"Script Command",type:"text",value:t.command||"",onChange:e=>a("command",e.target.value),placeholder:"/bin/check-health.sh",disabled:s}),(0,m.jsx)(b,{id:`group-${n}-healthCheck-interval`,name:"healthCheck.interval",label:"Check Interval (seconds)",type:"number",value:t.interval,onChange:e=>a("interval",e.target.value),min:1,disabled:s}),(0,m.jsx)(b,{id:`group-${n}-healthCheck-timeout`,name:"healthCheck.timeout",label:"Timeout (seconds)",type:"number",value:t.timeout,onChange:e=>a("timeout",e.target.value),min:1,disabled:s})]})})]}):null,M=({title:e,children:r,type:a="info",className:s=""})=>{let n={info:"bg-blue-100 dark:bg-monokai-bg",warning:"bg-yellow-100 dark:bg-monokai-bg",error:"bg-red-100 dark:bg-monokai-bg",success:"bg-green-100 dark:bg-monokai-bg"};return(0,m.jsxs)("div",{className:`p-3 border-l-4 rounded mb-4 ${{info:"bg-blue-50 border-blue-400 text-blue-700 dark:bg-monokai-surface dark:border-monokai-blue dark:text-monokai-blue",warning:"bg-yellow-50 border-yellow-400 text-yellow-700 dark:bg-monokai-surface dark:border-monokai-yellow dark:text-monokai-yellow",error:"bg-red-50 border-red-400 text-red-700 dark:bg-monokai-surface dark:border-monokai-red dark:text-monokai-red",success:"bg-green-50 border-green-400 text-green-700 dark:bg-monokai-surface dark:border-monokai-green dark:text-monokai-green"}[a]} ${s}`,children:[e&&(0,m.jsx)("h5",{className:"font-semibold text-sm",children:e}),(0,m.jsx)("div",{className:"text-xs mt-1 infobox-content",children:t.default.Children.map(r,e=>"string"==typeof e?e.split(/(<code>.*?<\/code>)/g).map((e,t)=>{if(e.startsWith("<code>")&&e.endsWith("</code>")){let r=e.slice(6,-7);return(0,m.jsx)("code",{className:`${n[a]} px-1 py-0.5 rounded`,children:r},t)}return e}):e)})]})},T=()=>(0,m.jsxs)(M,{title:"Nomad Runtime Environment Variables",type:"info",children:[(0,m.jsx)("p",{children:"Nomad injects these variables inside the container at runtime:"}),(0,m.jsxs)("ul",{className:"mt-1 ml-4 list-disc",children:[(0,m.jsxs)("li",{children:["General: ",(0,m.jsx)("code",{children:"NOMAD_ALLOC_ID"})," - Allocation ID"]}),(0,m.jsxs)("li",{children:["Network: ",(0,m.jsxs)("code",{children:["NOMAD_PORT_",(0,m.jsx)("em",{children:"label"})]})," - Port values"]}),(0,m.jsxs)("li",{children:["Network: ",(0,m.jsxs)("code",{children:["NOMAD_ADDR_",(0,m.jsx)("em",{children:"label"})]})," - IP:port for service ports"]}),(0,m.jsxs)("li",{children:["Tasks: ",(0,m.jsx)("code",{children:"NOMAD_TASK_NAME"})," - Name of the task"]})]}),(0,m.jsxs)("p",{className:"mt-2",children:["To see all variables: add a command like ",(0,m.jsx)("code",{children:"env | grep NOMAD"})," to your container"]})]}),E=({groupIndex:e,group:t,isFirst:r,onInputChange:a,onCheckboxChange:s,onEnvVarChange:n,onAddEnvVar:o,onRemoveEnvVar:l,onPortChange:i,onAddPort:d,onRemovePort:u,onHealthCheckChange:c,onRemoveGroup:h,jobName:p,namespace:f,isLoading:g})=>(0,m.jsxs)(x,{title:t.name||`Group ${e+1}`,isPrimary:r,isRemovable:!r,onRemove:h,isLoading:g,defaultExpanded:!0,children:[(0,m.jsx)(b,{id:`group-${e}-name`,name:"name",label:"Group Name",type:"text",value:t.name,onChange:a,placeholder:r?p||"main":`${p}-group-${e+1}`,disabled:g,required:!0,helpText:"A unique name for this task group. This name will be used for service discovery."}),(0,m.jsx)(b,{id:`group-${e}-count`,name:"count",label:"Count (Replicas)",type:"number",value:t.count,onChange:a,min:1,disabled:g,helpText:"Number of instances to run of this task group"}),(0,m.jsx)(b,{id:`group-${e}-image`,name:"image",label:"Docker Image",type:"text",value:t.image,onChange:a,placeholder:"nginx:latest",disabled:g,required:!0}),(0,m.jsx)(b,{id:`group-${e}-usePrivateRegistry`,name:"usePrivateRegistry",label:"Use Private Container Registry",type:"checkbox",value:t.usePrivateRegistry,onChange:s,disabled:g}),t.usePrivateRegistry&&(0,m.jsx)(k,{dockerAuth:t.dockerAuth,onInputChange:a,isLoading:g,groupIndex:e}),(0,m.jsx)(b,{id:`group-${e}-plugin`,name:"plugin",label:"Container Runtime",type:"select",value:t.plugin,onChange:a,disabled:g,options:[{value:"podman",label:"Podman"},{value:"docker",label:"Docker"}]}),(0,m.jsx)(y,{resources:t.resources,onInputChange:a,isLoading:g,groupIndex:e}),(0,m.jsx)(N,{envVars:t.envVars,onEnvVarChange:n,onAddEnvVar:o,onRemoveEnvVar:l,isLoading:g}),(0,m.jsx)(w,{enableNetwork:t.enableNetwork,networkMode:t.networkMode,ports:t.ports,onInputChange:a,onCheckboxChange:s,onPortChange:i,onAddPort:d,onRemovePort:u,isLoading:g,groupIndex:e}),(0,m.jsx)(P,{enableHealthCheck:t.enableHealthCheck,healthCheck:t.healthCheck,onCheckboxChange:s,onHealthCheckChange:c,isLoading:g,groupIndex:e}),(0,m.jsx)(T,{})]});e.s(["default",0,({taskGroups:e,jobName:t,namespace:r,isLoading:a,onAddTaskGroup:s,onGroupInputChange:n,onGroupCheckboxChange:o,onEnvVarChange:l,onAddEnvVar:i,onRemoveEnvVar:d,onPortChange:u,onAddPort:c,onRemovePort:h,onHealthCheckChange:b,onRemoveTaskGroup:p})=>(0,m.jsxs)("div",{className:"mb-6 border-t pt-4",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Task Groups"}),(0,m.jsx)("button",{type:"button",onClick:s,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:a,children:"Add Task Group"})]}),(0,m.jsx)("div",{className:"space-y-6",children:e.map((e,s)=>(0,m.jsx)(E,{groupIndex:s,group:e,isFirst:0===s,onInputChange:e=>n(s,e),onCheckboxChange:e=>o(s,e),onEnvVarChange:(e,t,r)=>l(s,e,t,r),onAddEnvVar:()=>i(s),onRemoveEnvVar:e=>d(s,e),onPortChange:(e,t,r)=>u(s,e,t,r),onAddPort:()=>c(s),onRemovePort:e=>h(s,e),onHealthCheckChange:(e,t)=>b(s,e,t),onRemoveGroup:()=>p(s),jobName:t,namespace:r,isLoading:a},s))})]})],94466),e.s(["default",0,({datacenters:e,onInputChange:t,isLoading:r})=>(0,m.jsxs)("div",{className:"mb-6 border p-4 rounded-md bg-gray-50",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Advanced Settings"}),(0,m.jsx)(b,{id:"datacenters",name:"datacenters",label:"Datacenters",type:"text",value:e.join(", "),onChange:t,placeholder:"dc1, dc2, dc3",disabled:r,helpText:"Comma-separated list of datacenters where this job can run"})]})],32872),e.s(["default",0,({showAdvancedSettings:e,setShowAdvancedSettings:t})=>(0,m.jsx)("div",{className:"mb-6 border-t pt-4",children:(0,m.jsx)("button",{type:"button",onClick:()=>t(!e),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e?"Hide Advanced Settings":"Show Advanced Settings"})})],43837)}]);