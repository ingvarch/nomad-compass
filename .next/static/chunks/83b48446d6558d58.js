(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4945,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},32508,(e,t,s)=>{t.exports=e.r(70821)},41204,e=>{"use strict";var t=e.i(88614),s=e.i(61116),r=e.i(94240);let a=(0,r.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),n=(0,r.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);var l=e.i(99550);let o=({className:e=""})=>{let{effectiveTheme:s,toggleTheme:r}=(0,l.useTheme)();return(0,t.jsx)("button",{onClick:r,className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
        text-gray-500 hover:text-gray-700 hover:bg-gray-100
        dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
        dark:focus:ring-offset-monokai-bg ${e}`,"aria-label":"dark"===s?"Switch to light mode":"Switch to dark mode",children:"dark"===s?(0,t.jsx)(a,{className:"h-5 w-5"}):(0,t.jsx)(n,{className:"h-5 w-5"})})};e.s(["ThemeToggle",0,({className:e=""})=>{let[r,a]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{a(!0)},[]),r)?(0,t.jsx)(o,{className:e}):(0,t.jsx)("button",{className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
          text-gray-500 hover:text-gray-700 hover:bg-gray-100
          dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
          dark:focus:ring-offset-monokai-bg ${e}`,"aria-label":"Toggle theme",children:(0,t.jsx)(n,{className:"h-5 w-5"})})}],41204)},97658,e=>{"use strict";class t{baseUrl;token;constructor(e,t){console.log("Initializing NomadClient with:",{nomadAddr:e,token:t}),this.baseUrl="/api/nomad",console.log("Using proxy baseUrl:",this.baseUrl),this.token=t}async request(e,t={}){let{params:s,...r}=t,a=`${this.baseUrl}${e}`;if(s){let e=new URLSearchParams;Object.entries(s).forEach(([t,s])=>{e.append(t,String(s))}),a=`${a}?${e.toString()}`}let n={"X-Nomad-Token":this.token,"Content-Type":"application/json",...r.headers};try{let e=await fetch(a,{...r,headers:n});if(!e.ok){let t=await e.json().catch(()=>({}));throw{statusCode:e.status,message:t.error||`API request failed with status ${e.status}`}}if(e.headers.get("content-type")?.includes("application/json"))return await e.json();return{Data:await e.text()}}catch(e){if(e.statusCode)throw e;throw{statusCode:0,message:`Network error: ${e.message}`}}}async getJobs(e){try{let t={};e?t.namespace=e:t.namespace="*";let s=await this.request("/v1/jobs",{method:"GET",params:t});return console.log("Processed jobs:",s),{Jobs:s}}catch(e){throw console.error("Error in getJobs():",e),e}}async getJob(e,t="default"){return this.request(`/v1/job/${e}`,{params:{namespace:t}})}async createJob(e){return this.request("/v1/jobs",{method:"POST",body:JSON.stringify(e)})}async updateJob(e){return this.createJob(e)}async stopJob(e,t="default"){return this.request(`/v1/job/${e}`,{method:"DELETE",params:{namespace:t}})}async deleteJob(e,t="default"){return this.request(`/v1/job/${e}`,{method:"DELETE",params:{namespace:t,purge:"true"}})}async getJobAllocations(e,t="default"){return this.request(`/v1/job/${e}/allocations`,{params:{namespace:t}})}async getAllocation(e){return this.request(`/v1/allocation/${e}`)}async getAllocationLogs(e,t,s,r=!0){return this.request(`/v1/client/fs/logs/${e}`,{method:"GET",params:{task:t,type:s,plain:r}})}async getPlugins(){return this.request("/v1/plugins")}async getNamespaces(){try{return this.request("/v1/namespaces")}catch(e){return console.error("Failed to fetch namespaces:",e),[{Name:"default"}]}}async validateConnection(){try{return await this.request("/v1/agent/self"),!0}catch(e){return!1}}}function s(e,s){return new t(e,s)}e.s(["createNomadClient",()=>s])},24346,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={assign:function(){return i},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});function n(e){let t={};for(let[s,r]of e.entries()){let e=t[s];void 0===e?t[s]=r:Array.isArray(e)?e.push(r):t[s]=[e,r]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[s,r]of Object.entries(e))if(Array.isArray(r))for(let e of r)t.append(s,l(e));else t.set(s,l(r));return t}function i(e,...t){for(let s of t){for(let t of s.keys())e.delete(t);for(let[t,r]of s.entries())e.append(t,r)}return e}},88764,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={formatUrl:function(){return o},formatWithValidation:function(){return d},urlObjectKeys:function(){return i}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(33398)._(e.r(24346)),l=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:s}=e,r=e.protocol||"",a=e.pathname||"",o=e.hash||"",i=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:s&&(d=t+(~s.indexOf(":")?`[${s}]`:s),e.port&&(d+=":"+e.port)),i&&"object"==typeof i&&(i=String(n.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return r&&!r.endsWith(":")&&(r+=":"),e.slashes||(!r||l.test(r))&&!1!==d?(d="//"+(d||""),a&&"/"!==a[0]&&(a="/"+a)):d||(d=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),a=a.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${r}${d}${a}${c}${o}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return o(e)}},45157,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=e.r(61116);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=n(e,r)),t&&(a.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},40470,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={DecodeError:function(){return p},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return j},NormalizeError:function(){return b},PageNotFoundError:function(){return y},SP:function(){return f},ST:function(){return g},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return x},stringifyError:function(){return N}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,s=!1;return(...r)=>(s||(s=!0,t=e(...r)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function d(){let{protocol:e,hostname:t,port:s}=window.location;return`${e}//${t}${s?":"+s:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function x(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let s=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(s&&m(s))return r;if(!r)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${r}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let f="undefined"!=typeof performance,g=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class b extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},85178,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"isLocalURL",{enumerable:!0,get:function(){return n}});let r=e.r(40470),a=e.r(90056);function n(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),s=new URL(e,t);return s.origin===t&&(0,a.hasBasePath)(s.pathname)}catch(e){return!1}}},52607,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},20877,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return p},useLinkStatus:function(){return y}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(33398),l=e.r(88614),o=n._(e.r(61116)),i=e.r(88764),d=e.r(90110),c=e.r(45157),u=e.r(40470),m=e.r(65433);e.r(4945);let x=e.r(93066),h=e.r(85178),f=e.r(89859);function g(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function p(t){var s;let r,a,n,[i,p]=(0,o.useOptimistic)(x.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:j,as:v,children:N,prefetch:k=null,passHref:w,replace:C,shallow:S,scroll:T,onClick:P,onMouseEnter:E,onTouchStart:M,legacyBehavior:$=!1,onNavigate:R,ref:O,unstable_dynamicOnHover:L,...D}=t;r=N,$&&("string"==typeof r||"number"==typeof r)&&(r=(0,l.jsx)("a",{children:r}));let I=o.default.useContext(d.AppRouterContext),A=!1!==k,_=!1!==k?null===(s=k)||"auto"===s?f.FetchStrategy.PPR:f.FetchStrategy.Full:f.FetchStrategy.PPR,{href:z,as:U}=o.default.useMemo(()=>{let e=g(j);return{href:e,as:v?g(v):e}},[j,v]);if($){if(r?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=o.default.Children.only(r)}let J=$?a&&"object"==typeof a&&a.ref:O,F=o.default.useCallback(e=>(null!==I&&(y.current=(0,x.mountLinkInstance)(e,z,I,_,A,p)),()=>{y.current&&((0,x.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,x.unmountPrefetchableInstance)(e)}),[A,z,I,_,p]),q={ref:(0,c.useMergedRef)(F,J),onClick(t){$||"function"!=typeof P||P(t),$&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!I||t.defaultPrevented||function(t,s,r,a,n,l,i){if("undefined"!=typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(s)){n&&(t.preventDefault(),location.replace(s));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(47890);o.default.startTransition(()=>{u(r||s,n?"replace":"push",l??!0,a.current)})}}(t,z,U,y,C,T,R)},onMouseEnter(e){$||"function"!=typeof E||E(e),$&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),I&&A&&(0,x.onNavigationIntent)(e.currentTarget,!0===L)},onTouchStart:function(e){$||"function"!=typeof M||M(e),$&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),I&&A&&(0,x.onNavigationIntent)(e.currentTarget,!0===L)}};return(0,u.isAbsoluteUrl)(U)?q.href=U:$&&!w&&("a"!==a.type||"href"in a.props)||(q.href=(0,m.addBasePath)(U)),n=$?o.default.cloneElement(a,q):(0,l.jsx)("a",{...D,...q,children:r}),(0,l.jsx)(b.Provider,{value:i,children:n})}e.r(52607);let b=(0,o.createContext)(x.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(b);("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},54968,e=>{"use strict";var t=e.i(88614),s=e.i(61116),r=e.i(32508),a=e.i(67236),n=e.i(20877),l=e.i(41204);let o=()=>{let[e,o]=(0,s.useState)(!1),i=(0,r.usePathname)(),{logout:d,nomadAddr:c}=(0,a.useAuth)(),u=e=>i===e||i?.startsWith(`${e}/`);return(0,t.jsxs)("nav",{className:"bg-white dark:bg-monokai-bg shadow-sm border-b border-gray-200 dark:border-monokai-surface",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)("span",{className:"text-blue-600 dark:text-monokai-blue font-bold text-xl",children:"Nomad Compass"})}),(0,t.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[(0,t.jsx)(n.default,{href:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${u("/dashboard")?"border-blue-500 text-gray-900 dark:border-monokai-blue dark:text-monokai-text":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-monokai-muted dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Dashboard"}),(0,t.jsx)(n.default,{href:"/jobs",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${u("/jobs")?"border-blue-500 text-gray-900 dark:border-monokai-blue dark:text-monokai-text":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-monokai-muted dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Jobs"})]})]}),(0,t.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:(0,t.jsx)("div",{className:"ml-3 relative",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[c&&(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-monokai-muted hidden md:inline-block",children:c}),(0,t.jsx)(l.ThemeToggle,{}),(0,t.jsx)("button",{onClick:d,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 dark:bg-monokai-red dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-monokai-bg",children:"Sign Out"})]})})}),(0,t.jsxs)("div",{className:"-mr-2 flex items-center sm:hidden",children:[(0,t.jsx)(l.ThemeToggle,{className:"mr-2"}),(0,t.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>o(!e),children:[(0,t.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,t.jsx)("svg",{className:`${e?"hidden":"block"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),(0,t.jsx)("svg",{className:`${e?"block":"hidden"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]})]})}),(0,t.jsxs)("div",{className:`${e?"block":"hidden"} sm:hidden`,id:"mobile-menu",children:[(0,t.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,t.jsx)(n.default,{href:"/dashboard",className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${u("/dashboard")?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-monokai-surface dark:border-monokai-blue dark:text-monokai-blue":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 dark:text-monokai-muted dark:hover:bg-monokai-surface dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Dashboard"}),(0,t.jsx)(n.default,{href:"/jobs",className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium ${u("/jobs")?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-monokai-surface dark:border-monokai-blue dark:text-monokai-blue":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 dark:text-monokai-muted dark:hover:bg-monokai-surface dark:hover:border-monokai-surface dark:hover:text-monokai-text"}`,children:"Jobs"})]}),(0,t.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-200 dark:border-monokai-surface",children:[(0,t.jsx)("div",{className:"flex items-center px-4",children:(0,t.jsx)("div",{className:"ml-3",children:c&&(0,t.jsx)("div",{className:"text-sm font-medium text-gray-500 dark:text-monokai-muted",children:c})})}),(0,t.jsx)("div",{className:"mt-3 space-y-1",children:(0,t.jsx)("button",{onClick:d,className:"block w-full text-left px-4 py-2 text-base font-medium text-red-600 hover:bg-gray-100 dark:text-monokai-red dark:hover:bg-monokai-surface",children:"Sign Out"})})]})]})]})};e.s(["default",0,({children:e})=>{let{isAuthenticated:n}=(0,a.useAuth)();return((0,r.useRouter)(),(0,s.useEffect)(()=>{n||(console.log("Not authenticated, redirecting to login..."),window.location.href="/auth/login")},[n]),n)?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-monokai-bg",children:[(0,t.jsx)(o,{}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e})]}):(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 dark:bg-monokai-bg",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-monokai-blue"})})}],54968)},94823,39789,e=>{"use strict";var t=e.i(94240);let s=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],94823);let r=(0,t.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>r],39789)},38236,e=>{"use strict";var t=e.i(88614),s=e.i(61116),r=e.i(32508),a=e.i(20877),n=e.i(54968),l=e.i(67236),o=e.i(97658),i=e.i(94240);let d=(0,i.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),c=(0,i.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),u=(0,i.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),m=({jobId:e,allocId:r,taskName:a,initialTaskGroup:n})=>{let{token:i,nomadAddr:m}=(0,l.useAuth)(),[x,h]=(0,s.useState)(""),[f,g]=(0,s.useState)(!0),[p,b]=(0,s.useState)(null),[y,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(null),[k,w]=(0,s.useState)(null),[C,S]=(0,s.useState)("stdout"),[T,P]=(0,s.useState)([]),[E,M]=(0,s.useState)(null),[$,R]=(0,s.useState)(!1),[O,L]=(0,s.useState)(5),D=(0,s.useRef)(null),[I,A]=(0,s.useState)(null);(0,s.useEffect)(()=>{n&&n!==E&&(b(null),M(n))},[n]),(0,s.useEffect)(()=>{(async()=>{if(!i||!m){b("Authentication required"),g(!1);return}try{let t=(0,o.createNomadClient)(m,i),s=new URLSearchParams(window.location.search).get("namespace")||"default",r=await t.getJob(e,s);r&&r.TaskGroups&&(P(r.TaskGroups),!E&&r.TaskGroups.length>0&&M(r.TaskGroups[0].Name))}catch(e){console.error("Failed to fetch job data:",e),b("Failed to load job data. Please try again.")}})()},[e,i,m,E]),(0,s.useEffect)(()=>{let t=async()=>{if(!i||!m){b("Authentication required"),g(!1);return}try{let t=(0,o.createNomadClient)(m,i),s=new URLSearchParams(window.location.search).get("namespace")||"default",n=(await t.getJobAllocations(e,s)).filter(e=>E?"running"===e.ClientStatus&&e.TaskGroup===E:"running"===e.ClientStatus);if(j(n),n.length>0){let e=r||n[0].ID;N(e);let s=await t.getAllocation(e),l=Object.keys(s.TaskStates||{});l.length>0&&w(a||l[0])}else N(null),w(null),h("No running allocations for this task group");b(null),g(!1)}catch(e){console.error("Failed to fetch allocations:",e),b("Failed to load job allocations. Please try again."),g(!1)}};if(E){h(""),N(null),w(null),g(!0);let e=setTimeout(()=>{t()},300);return()=>clearTimeout(e)}},[e,i,m,r,a,E]);let _=(0,s.useCallback)(async()=>{if(i&&m&&v&&k){g(!0);try{let e=(0,o.createNomadClient)(m,i),t=await e.getAllocationLogs(v,k,C,!0);h(t.Data||"No logs available"),A(new Date),b(null)}catch(e){console.error("Failed to fetch logs:",e),b("Failed to load logs. Please try again."),h("")}finally{g(!1)}}},[v,k,C,i,m]);return((0,s.useEffect)(()=>{v&&k&&_()},[v,k,C,_]),(0,s.useEffect)(()=>(D.current&&(clearInterval(D.current),D.current=null),$&&v&&k&&(D.current=setInterval(()=>{_()},1e3*O)),()=>{D.current&&clearInterval(D.current)}),[$,O,v,k,_]),!p||y.length||E)?!f||y.length||T.length?(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-wrap justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Job Logs"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2 sm:mt-0",children:[T.length>0&&(0,t.jsxs)("select",{value:E||"",onChange:e=>{M(e.target.value),N(null),w(null)},className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,t.jsx)("option",{value:"",children:"Select Task Group"}),T.map(e=>(0,t.jsx)("option",{value:e.Name,children:e.Name},e.Name))]}),y.length>1&&(0,t.jsx)("select",{value:v||"",onChange:e=>N(e.target.value),className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:y.map(e=>(0,t.jsxs)("option",{value:e.ID,children:[e.ID.substring(0,8),"... - ",e.ClientStatus]},e.ID))}),v&&(0,t.jsx)("select",{value:k||"",onChange:e=>w(e.target.value),className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:y.find(e=>e.ID===v)?.TaskStates&&Object.keys(y.find(e=>e.ID===v)?.TaskStates||{}).map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,t.jsx)("option",{value:"stdout",children:"stdout"}),(0,t.jsx)("option",{value:"stderr",children:"stderr"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{R(e=>!e)},className:`inline-flex items-center px-2 py-1 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${$?"text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500":"text-gray-700 bg-gray-100 hover:bg-gray-200 focus:ring-gray-500"}`,title:$?"Disable auto-refresh":"Enable auto-refresh",children:[$?(0,t.jsx)(c,{size:16}):(0,t.jsx)(u,{size:16}),(0,t.jsx)("span",{className:"ml-1",children:"Auto"})]}),$&&(0,t.jsxs)("select",{value:O,onChange:e=>{L(Number(e.target.value))},className:"block w-full sm:w-auto pl-2 pr-7 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,t.jsx)("option",{value:"2",children:"2s"}),(0,t.jsx)("option",{value:"5",children:"5s"}),(0,t.jsx)("option",{value:"10",children:"10s"}),(0,t.jsx)("option",{value:"30",children:"30s"}),(0,t.jsx)("option",{value:"60",children:"60s"})]}),(0,t.jsx)("button",{onClick:()=>{_()},className:"inline-flex items-center px-2 py-1 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:f||!v||!k,title:"Refresh logs",children:(0,t.jsx)(d,{size:16,className:f?"animate-spin":""})})]})]})]}),(0,t.jsxs)("div",{className:"p-6",children:[f&&!x&&(0,t.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),p&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsx)("span",{className:"block sm:inline",children:p})}),!E&&(0,t.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"Please select a task group to view logs."})})]})}),E&&0===y.length&&(0,t.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"No running allocations found for the selected task group."})})]})}),(0,t.jsxs)("div",{className:"mb-2 flex justify-between items-center text-xs text-gray-500",children:[I&&(0,t.jsxs)("span",{children:["Last updated: ",I.toLocaleTimeString()]}),$&&(0,t.jsxs)("span",{children:["Auto-refreshing every ",O," seconds"]})]}),(0,t.jsx)("pre",{className:`bg-gray-800 text-white p-4 rounded-md overflow-auto max-h-96 text-sm font-mono ${f?"opacity-50":""}`,children:x||"No logs available"})]})]}):(0,t.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):(0,t.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,t.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,t.jsx)("span",{className:"block sm:inline",children:p})]})};var x=e.i(30214),h=e.i(82504);let f=(0,i.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),g=({jobId:e,jobStatus:a,onStatusChange:n})=>{let i=(0,r.useRouter)(),{token:d,nomadAddr:c}=(0,l.useAuth)(),{addToast:u}=(0,x.useToast)(),[m,g]=(0,s.useState)(!1),[p,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(null),v=a?.toLowerCase()==="dead";a?.toLowerCase();let N=e=>{j(e),setTimeout(()=>{y===e&&j(null)},1e4)},k=()=>{j(null)},w=async()=>{g(!0),b(null),j(null);try{if(!d||!c)throw Error("Authentication required");let t=(0,o.createNomadClient)(c,d),s=new URLSearchParams(window.location.search).get("namespace")||"default",r=await t.getJob(e,s);if(!r||!r.ID)throw Error("Could not retrieve job specification");!0===r.Stop&&(r.Stop=!1),r.Namespace=s,await t.createJob({Job:r}),u("Job started successfully","success"),n&&n(),i.refresh()}catch(t){console.error("Failed to start job:",t);let e="object"==typeof t&&null!==t&&"message"in t?t.message:"Failed to start job. Please try again.";b(e),u(e,"error")}finally{g(!1)}},C=async()=>{g(!0),b(null),j(null);try{if(!d||!c)throw Error("Authentication required");let t=(0,o.createNomadClient)(c,d),s=new URLSearchParams(window.location.search).get("namespace")||"default";await t.stopJob(e,s),u("Job stopped successfully","success"),n&&n(),i.refresh()}catch(t){console.error("Failed to stop job:",t);let e="object"==typeof t&&null!==t&&"message"in t?t.message:"Failed to stop job. Please try again.";b(e),u(e,"error")}finally{g(!1)}},S=async()=>{g(!0),b(null),j(null);try{if(!d||!c)throw Error("Authentication required");let t=(0,o.createNomadClient)(c,d),s=new URLSearchParams(window.location.search).get("namespace")||"default";await t.deleteJob(e,s),u("Job deleted successfully","success"),i.push("/jobs")}catch(t){console.error("Failed to delete job:",t);let e="object"==typeof t&&null!==t&&"message"in t?t.message:"Failed to delete job. Please try again.";b(e),u(e,"error")}finally{g(!1)}},T="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2",P="bg-green-600 hover:bg-green-700 focus:ring-green-500",E="bg-gray-500 hover:bg-gray-600 focus:ring-gray-400 ml-2";return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[p&&(0,t.jsx)("div",{className:"text-red-600 text-sm mr-2",children:p}),v?(0,t.jsxs)(t.Fragment,{children:["start"===y?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Start job?"}),(0,t.jsxs)("button",{onClick:w,disabled:m,className:`${T} ${P}`,children:[(0,t.jsx)(f,{size:16,className:"mr-1"})," Yes, Start"]}),(0,t.jsxs)("button",{onClick:k,disabled:m,className:`${T} ${E}`,children:[(0,t.jsx)(h.X,{size:16,className:"mr-1"})," Cancel"]})]}):(0,t.jsx)("button",{onClick:()=>N("start"),disabled:m,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:m?"Working...":"Start"}),"delete"===y?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Delete permanently?"}),(0,t.jsxs)("button",{onClick:S,disabled:m,className:`${T} ${P}`,children:[(0,t.jsx)(f,{size:16,className:"mr-1"})," Yes, Delete"]}),(0,t.jsxs)("button",{onClick:k,disabled:m,className:`${T} ${E}`,children:[(0,t.jsx)(h.X,{size:16,className:"mr-1"})," Cancel"]})]}):"start"!==y&&(0,t.jsx)("button",{onClick:()=>N("delete"),disabled:m,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:m?"Working...":"Delete"})]}):(0,t.jsx)(t.Fragment,{children:"stop"===y?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Stop job?"}),(0,t.jsxs)("button",{onClick:C,disabled:m,className:`${T} ${P}`,children:[(0,t.jsx)(f,{size:16,className:"mr-1"})," Yes, Stop"]}),(0,t.jsxs)("button",{onClick:k,disabled:m,className:`${T} ${E}`,children:[(0,t.jsx)(h.X,{size:16,className:"mr-1"})," Cancel"]})]}):(0,t.jsx)("button",{onClick:()=>N("stop"),disabled:m,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:m?"Working...":"Stop"})})]})},p=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var b=e.i(94823),y=e.i(39789);let j=({envVars:e})=>{let[r,a]=(0,s.useState)({}),[n,l]=(0,s.useState)(null);return e&&0!==Object.keys(e).length?(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(e).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center bg-gray-50 p-2 rounded-md border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex-grow mr-2",children:[(0,t.jsx)("div",{className:"font-medium text-sm text-gray-700",children:e}),(0,t.jsx)("div",{className:"text-sm text-gray-500 font-mono",children:r[e]?s:"••••••••••••••••"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{a(t=>({...t,[e]:!t[e]}))},className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1 rounded-md hover:bg-gray-100",title:r[e]?"Hide value":"Show value",children:r[e]?(0,t.jsx)(y.EyeOff,{size:16}):(0,t.jsx)(b.Eye,{size:16})}),(0,t.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(s).then(()=>{l(e),setTimeout(()=>l(null),2e3)}).catch(e=>{console.error("Failed to copy:",e)})},className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1 rounded-md hover:bg-gray-100",title:"Copy to clipboard",children:[(0,t.jsx)(p,{size:16}),n===e&&(0,t.jsx)("span",{className:"absolute -ml-8 -mt-8 bg-black text-white text-xs px-2 py-1 rounded opacity-80",children:"Copied!"})]})]})]},e))}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No environment variables defined"})};function v(){let e=(0,r.useParams)(),i=(0,r.useSearchParams)(),d=(0,r.useRouter)(),{token:c,nomadAddr:u}=(0,l.useAuth)(),{addToast:h}=(0,x.useToast)(),[f,p]=(0,s.useState)(null),[b,y]=(0,s.useState)(!0),[v,N]=(0,s.useState)(null),[k,w]=(0,s.useState)({}),C=(0,s.useRef)(null),[S,T]=(0,s.useState)(null),P=e.id,E=i.get("namespace")||"default",M=(0,s.useCallback)(async()=>{if(!c||!u){N("Authentication required"),y(!1);return}y(!0);try{let e=(0,o.createNomadClient)(u,c),t=await e.getJob(P,E);if(p(t),t.TaskGroups&&t.TaskGroups.length>0){let e={};t.TaskGroups.forEach(t=>{e[t.Name]=!1,e[`${t.Name}-container`]=!1}),w(e)}N(null)}catch(e){console.error("Failed to fetch job details:",e),N("Failed to load job details. Please check your connection and try again."),h("Failed to load job details","error")}finally{y(!1)}},[c,u,P,E,h]);(0,s.useEffect)(()=>{M()},[M]);let $=e=>new Date(1e3*e).toLocaleString();return b?(0,t.jsx)(n.default,{children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):v?(0,t.jsx)(n.default,{children:(0,t.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,t.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,t.jsx)("span",{className:"block sm:inline",children:v})]})}):f?(0,t.jsx)(n.default,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:f.Name||f.ID}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Job ID: ",f.ID]}),(0,t.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:["Namespace: ",f.Namespace||"default"]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(a.default,{href:`/jobs/${f.ID}/edit?namespace=${f.Namespace||"default"}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit"}),(0,t.jsx)(a.default,{href:"/jobs",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Jobs"})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Job Summary"})}),(0,t.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("dl",{children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,t.jsxs)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"running"===f.Status?"bg-green-100 text-green-800":"pending"===f.Status?"bg-yellow-100 text-yellow-800":f.Stop?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:[f.Status," ",f.Stop?"(Stopped)":""]})})]}),(0,t.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Type"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:f.Type})]}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Priority"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:f.Priority})]}),(0,t.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Datacenters"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:f.Datacenters&&f.Datacenters.join(", ")})]})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("dl",{children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:f.CreateTime?$(f.CreateTime):"Unknown"})]}),(0,t.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Modified"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:f.ModifyTime?$(f.ModifyTime):"Unknown"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Namespace"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,t.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:f.Namespace||"default"})})]}),(0,t.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Version"}),(0,t.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:f.Version||"Unknown"})]})]})})]})]}),f.TaskGroups&&f.TaskGroups.length>0&&(0,t.jsx)("div",{className:"space-y-6",children:f.TaskGroups.map((e,s)=>(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 flex items-center cursor-pointer",onClick:()=>{var t;return t=e.Name,void w({...k,[t]:!k[t]})},children:[(0,t.jsx)("svg",{className:`h-5 w-5 text-gray-500 transition-transform mr-2 ${k[e.Name]?"transform rotate-90":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Task Group: ",e.Name,(0,t.jsxs)("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800",children:["Count: ",e.Count]})]})]}),k[e.Name]&&(0,t.jsxs)("div",{className:"p-6",children:[e&&e.Networks&&e.Networks.length?e.Networks.map((e,s)=>{let r=e.DynamicPorts&&e.DynamicPorts.length>0,a=e.ReservedPorts&&e.ReservedPorts.length>0;return r||a?(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:["Network Configuration (Mode: ",e.Mode,")"]}),r&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Dynamic Ports"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Label"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Host Port"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Container Port"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.DynamicPorts.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Label}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,t.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Dynamic"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.To||e.Value||"-"})]},s))})]})})]}),a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Static Ports"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Label"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Host Port"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Container Port"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.ReservedPorts.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Label}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Value}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.To||e.Value||"-"})]},s))})]})})]})]},s):null}):null,e&&e.Services&&e.Services.length?e.Services.map((e,s)=>e.Checks&&e.Checks.length?(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:["Health Check for ",e.Name]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Path/Command"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interval"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timeout"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check Restart"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.Checks.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Type}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Path||e.Command||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Interval?`${Math.round(e.Interval/1e9)}s`:"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.Timeout?`${Math.round(e.Timeout/1e9)}s`:"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.CheckRestart?(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{children:["Limit: ",e.CheckRestart.Limit]}),(0,t.jsx)("br",{}),(0,t.jsxs)("span",{children:["Grace: ",Math.round(e.CheckRestart.Grace/1e9),"s"]})]}):"-"})]},s))})]})})]},s):null):null,(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:"Container"}),(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-white mt-2",children:[(0,t.jsxs)("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-gray-50",onClick:t=>{t.stopPropagation();let s=`${e.Name}-container`;w({...k,[s]:!k[s]})},children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:`h-5 w-5 text-gray-500 transition-transform ${k[`${e.Name}-container`]?"transform rotate-90":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,t.jsx)("h5",{className:"text-md font-medium text-gray-900 ml-2",children:e.Tasks[0].Name})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-600 text-white hover:bg-blue-700",onClick:t=>{t.stopPropagation(),T(e.Name),C.current?.scrollIntoView({behavior:"smooth"})},children:"View Logs"})})]}),k[`${e.Name}-container`]&&(0,t.jsxs)("div",{className:"p-4 border-t",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,t.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Task Details"}),(0,t.jsxs)("dl",{className:"divide-y divide-gray-200",children:[(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,t.jsx)("dd",{className:"text-sm text-gray-900",children:e.Tasks[0].Name})]}),(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Driver"}),(0,t.jsx)("dd",{className:"text-sm text-gray-900",children:e.Tasks[0].Driver})]}),(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Image"}),(0,t.jsx)("dd",{className:"text-sm text-gray-900 break-words",children:e.Tasks[0].Config?.image||"-"})]}),e.Tasks[0].Leader&&(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Leader"}),(0,t.jsx)("dd",{className:"text-sm text-gray-900",children:"Yes"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,t.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resources"}),(0,t.jsxs)("dl",{className:"divide-y divide-gray-200",children:[(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"CPU"}),(0,t.jsxs)("dd",{className:"text-sm text-gray-900",children:[e.Tasks[0].Resources?.CPU||0," MHz"]})]}),(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Memory"}),(0,t.jsxs)("dd",{className:"text-sm text-gray-900",children:[e.Tasks[0].Resources?.MemoryMB||0," MB"]})]}),(0,t.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Disk"}),(0,t.jsxs)("dd",{className:"text-sm text-gray-900",children:[e.Tasks[0].Resources?.DiskMB||0," MB"]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,t.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Environment Variables"}),e.Tasks[0].Env&&Object.keys(e.Tasks[0].Env).length>0?(0,t.jsx)(j,{envVars:e.Tasks[0].Env}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No environment variables defined"})]})]}),e.Tasks[0].Config&&Object.keys(e.Tasks[0].Config).filter(e=>"image"!==e&&"auth"!==e).length>0&&(0,t.jsxs)("div",{className:"mt-4 bg-gray-50 p-4 rounded-md",children:[(0,t.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Configuration"}),(0,t.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-auto max-h-40",children:JSON.stringify(Object.entries(e.Tasks[0].Config).filter(([e])=>"image"!==e&&"auth"!==e).reduce((e,[t,s])=>({...e,[t]:s}),{}),null,2)})]})]})]})]})]})]},s))}),(0,t.jsx)("div",{ref:C,className:"mt-6",children:f.ID&&(0,t.jsx)(m,{jobId:f.ID,initialTaskGroup:S})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("div",{className:"flex space-x-4",children:(0,t.jsx)(g,{jobId:f.ID,jobStatus:f.Status,onStatusChange:()=>{M()}})}),(0,t.jsx)("button",{onClick:()=>d.push("/jobs"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back"})]})]})}):(0,t.jsx)(n.default,{children:(0,t.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"Job not found."})})]})})})}e.s(["default",()=>v],38236)}]);