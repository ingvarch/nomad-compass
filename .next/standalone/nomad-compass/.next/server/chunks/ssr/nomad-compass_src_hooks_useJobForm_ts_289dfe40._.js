module.exports=[90556,42993,56104,43901,38793,88348,96551,a=>{"use strict";var b=a.i(80971),c=a.i(95892),d=a.i(89676),e=a.i(90795);function f(a){let b=a.taskGroups.map(a=>{let b,c,d;a.enableNetwork?(b={Mode:a.networkMode||"bridge",DynamicPorts:[],ReservedPorts:[]},a.ports.forEach(a=>{if(""===a.label.trim())return;let c={Label:a.label,...a.to?{To:a.to}:{}};a.static?(c.Value=a.value,b.ReservedPorts.push(c)):b.DynamicPorts.push(c)})):b=void 0;let e=(c={},a.envVars&&a.envVars.length>0&&a.envVars.forEach(a=>{""!==a.key.trim()&&(c[a.key]=a.value)}),d={image:a.image},a.usePrivateRegistry&&a.dockerAuth&&(d.auth={username:a.dockerAuth.username,password:a.dockerAuth.password}),{Name:a.name,Driver:a.plugin,Config:d,Env:c,Resources:{CPU:a.resources.CPU,MemoryMB:a.resources.MemoryMB,DiskMB:a.resources.DiskMB||500}}),f={Name:a.name,Count:a.count,Tasks:[e]};if(b&&(b.DynamicPorts.length>0||b.ReservedPorts.length>0)&&(f.Networks=[b]),a.enableHealthCheck&&a.healthCheck){let b=a.healthCheck;f.Services=[{Name:a.name,TaskName:a.name,AddressMode:"auto",PortLabel:a.ports.length>0&&a.ports[0].label?a.ports[0].label:"http",Provider:"nomad",Checks:[{Type:b.type,..."http"===b.type?{Path:b.path}:{},..."script"===b.type?{Command:b.command}:{},Interval:1e9*b.interval,Timeout:1e9*b.timeout,CheckRestart:{Limit:3,Grace:1e9*(b.initialDelay||5),IgnoreWarnings:!1}}]}]}return f});return{Job:{ID:a.name,Name:a.name,Namespace:a.namespace,Type:"service",Datacenters:a.datacenters,TaskGroups:b}}}function g(a,b){let c=f(b);return a&&(c.Job.ID=a.ID,c.Job.Name=a.Name,a.Meta&&(c.Job.Meta=a.Meta),a.Constraints&&(c.Job.Constraints=a.Constraints),void 0!==a.Priority&&(c.Job.Priority=a.Priority),a.TaskGroups&&a.TaskGroups.length>0&&c.Job.TaskGroups.forEach(b=>{let c=a.TaskGroups.find(a=>a.Name===b.Name);c&&(c.Meta&&(b.Meta=c.Meta),c.Constraints&&(b.Constraints=c.Constraints))})),c}function h(a){let b=a.TaskGroups.map(a=>{let b=a.Tasks[0],c=b.Config||{},d=b.Env?Object.entries(b.Env).map(([a,b])=>({key:a,value:b})).sort((a,b)=>a.key.localeCompare(b.key)):[],e=!!(c.auth&&c.auth.username&&c.auth.password),f=a.Networks&&a.Networks.length>0?a.Networks[0]:null,g=!!f,h=f&&f.Mode?f.Mode:"none",i=[];f&&(f.DynamicPorts&&f.DynamicPorts.length>0&&(i=[...i,...f.DynamicPorts.map(a=>({label:a.Label,value:0,to:a.To||0,static:!1}))]),f.ReservedPorts&&f.ReservedPorts.length>0&&(i=[...i,...f.ReservedPorts.map(a=>({label:a.Label,value:a.Value,to:a.To||a.Value,static:!0}))])),0===i.length&&g&&(i=[{label:"http",value:8080,to:8080,static:!1}]);let j=a.Services||[],k=j.length>0?j[0]:null,l=k&&k.Checks&&k.Checks.length>0?k.Checks[0]:null,m=l?{type:l.Type||"http",path:"http"===l.Type?l.Path:"/health",command:"script"===l.Type?l.Command:"",interval:l?Math.floor(l.Interval/1e9):30,timeout:l?Math.floor(l.Timeout/1e9):5,initialDelay:l.CheckRestart?Math.floor(l.CheckRestart.Grace/1e9):5,failuresBeforeUnhealthy:3,successesBeforeHealthy:2}:void 0;return{name:a.Name,count:a.Count||1,image:c.image||"",plugin:b.Driver||"podman",resources:{CPU:b.Resources?.CPU||100,MemoryMB:b.Resources?.MemoryMB||256,DiskMB:b.Resources?.DiskMB||500},envVars:d,usePrivateRegistry:e,dockerAuth:e?{username:c.auth.username,password:c.auth.password}:void 0,enableNetwork:g,networkMode:h,ports:i,enableHealthCheck:!!l,healthCheck:m}});return{name:a.Name,namespace:a.Namespace||"default",taskGroups:b,serviceProvider:"nomad",datacenters:a.Datacenters||["dc1"]}}function i(a){return/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(a)}a.s(["convertJobToFormData",()=>h,"createJobSpec",()=>f,"updateJobSpec",()=>g],42993);let j={name:"",count:1,image:"",plugin:"podman",resources:{CPU:100,MemoryMB:256,DiskMB:500},envVars:[],usePrivateRegistry:!1,dockerAuth:{username:"",password:""},enableNetwork:!1,networkMode:"bridge",ports:[{label:"http",value:8080,to:8080,static:!1}],enableHealthCheck:!1,healthCheck:{type:"http",path:"/health",interval:30,timeout:5,initialDelay:5,failuresBeforeUnhealthy:3,successesBeforeHealthy:2}},k={name:"",namespace:"default",taskGroups:[{...j}],serviceProvider:"nomad",datacenters:["dc1"]};function l(){let a=(0,c.useRouter)(),{token:g,nomadAddr:h}=(0,d.useAuth)(),[l,m]=(0,b.useState)(!1),[n,o]=(0,b.useState)(null),[p,q]=(0,b.useState)(null),[r,s]=(0,b.useState)(["default"]),[t,u]=(0,b.useState)(!0),[v,w]=(0,b.useState)(!0),[x,y]=(0,b.useState)(k);(0,b.useEffect)(()=>{(async()=>{if(!g||!h)return u(!1);try{let a=(0,e.createNomadClient)(h,g),b=await a.getNamespaces();if(b&&Array.isArray(b)){let a=b.map(a=>a.Name);s(a.length>0?a:["default"])}}catch(a){console.error("Failed to fetch namespaces:",a),s(["default"])}finally{u(!1)}})()},[g,h]);let z=a=>{let b=[...x.taskGroups],c=b[a].envVars||[];b[a]={...b[a],envVars:[...c,{key:"",value:""}]},y({...x,taskGroups:b})};(0,b.useEffect)(()=>{x.taskGroups.forEach((a,b)=>{a.envVars&&0!==a.envVars.length||z(b)})},[x,z]);let A=async b=>{b.preventDefault(),o(null),q(null),m(!0);try{if(!g||!h)throw Error("Authentication required");if(!x.name.trim())throw Error("Job name is required");if(!i(x.name))throw w(!1),Error("Job name must start with a letter or number and contain only letters, numbers, hyphens, underscores, and dots");for(let a=0;a<x.taskGroups.length;a++){let b=x.taskGroups[a];if(!b.name.trim())throw Error(`Group ${a+1} name is required`);if(!b.image.trim())throw Error(`Image for group ${a+1} is required`);if(b.usePrivateRegistry){if(!b.dockerAuth?.username)throw Error(`Username is required for private registry in group ${a+1}`);if(!b.dockerAuth?.password)throw Error(`Password is required for private registry in group ${a+1}`)}if(b.envVars&&(b.envVars=b.envVars.filter(a=>""!==a.key.trim()||""!==a.value.trim())),b.enableNetwork&&b.ports.length>0)for(let c=0;c<b.ports.length;c++){let d=b.ports[c];if(!d.label)throw Error(`Port label is required for port ${c+1} in group ${a+1}`);if(d.static&&(!d.value||d.value<=0||d.value>65535))throw Error(`Valid port value (1-65535) is required for static port ${c+1} in group ${a+1}`)}}let b=f(x);console.log("Job spec:",JSON.stringify(b,null,2));let c=(0,e.createNomadClient)(h,g);await c.createJob(b),q(`Job "${x.name}" created successfully in namespace "${x.namespace}"!`),setTimeout(()=>{a.push("/jobs")},2e3)}catch(a){console.error("Failed to create job:",a),o("object"==typeof a&&null!==a&&"message"in a?a.message:"Failed to create job. Please check your inputs and try again.")}finally{m(!1)}};return{formData:x,isLoading:l,isLoadingNamespaces:t,isNameValid:v,error:n,success:p,namespaces:r,handleInputChange:a=>{let{name:b,value:c,type:d}=a.target,e="number"===d?Number(c):c;"name"===b&&w(i(c)),"datacenters"===b?y({...x,datacenters:c.split(",").map(a=>a.trim())}):y({...x,[b]:e})},handleGroupInputChange:(a,b)=>{let{name:c,value:d,type:e}=b.target,f="number"===e?Number(d):d,g=[...x.taskGroups],h=c.split(".");if(1===h.length)g[a]={...g[a],[c]:f};else if(2===h.length&&"resources"===h[0]){let b=h[1];g[a]={...g[a],resources:{...g[a].resources,[b]:parseInt(d,10)}}}else if(2===h.length&&"dockerAuth"===h[0]){let b=h[1];g[a]={...g[a],dockerAuth:{...g[a].dockerAuth,[b]:d}}}else if(2===h.length&&"healthCheck"===h[0]){let b=h[1];g[a]={...g[a],healthCheck:{...g[a].healthCheck,[b]:"number"===e?parseInt(d,10):d}}}y({...x,taskGroups:g})},handleSelectChange:(a,b)=>{let{name:c,value:d}=b.target,e=[...x.taskGroups];e[a]={...e[a],[c]:d},y({...x,taskGroups:e})},handleGroupCheckboxChange:(a,b)=>{let{name:c,checked:d}=b.target,e=[...x.taskGroups];e[a]={...e[a],[c]:d},y({...x,taskGroups:e})},handleEnvVarChange:(a,b,c,d)=>{let e=[...x.taskGroups],f=[...e[a].envVars||[]];f[b]||(f[b]={key:"",value:""}),f[b]={...f[b],[c]:d},e[a]={...e[a],envVars:f},y({...x,taskGroups:e})},addEnvVar:z,removeEnvVar:(a,b)=>{let c=[...x.taskGroups],d=[...c[a].envVars||[]];d.length<=1?c[a]={...c[a],envVars:[]}:(d.splice(b,1),c[a]={...c[a],envVars:d}),y({...x,taskGroups:c})},handlePortChange:(a,b,c,d)=>{let e=[...x.taskGroups],f=[...e[a].ports];if("static"===c){let a="true"===d;f[b]={...f[b],[c]:a},a&&!f[b].value&&(f[b].value=8080+b)}else"label"===c?f[b]={...f[b],[c]:d}:f[b]={...f[b],[c]:parseInt(d,10)||0};e[a]={...e[a],ports:f},y({...x,taskGroups:e})},addPort:a=>{let b=[...x.taskGroups];b[a]={...b[a],ports:[...b[a].ports,{label:"",value:0,to:8080,static:!1}]},y({...x,taskGroups:b})},removePort:(a,b)=>{let c=[...x.taskGroups];if(c[a].ports.length<=1){c[a]={...c[a],ports:[{label:"",value:0,to:0,static:!1}]};return}let d=[...c[a].ports];d.splice(b,1),c[a]={...c[a],ports:d},y({...x,taskGroups:c})},handleHealthCheckChange:(a,b,c)=>{let d=[...x.taskGroups];d[a].healthCheck||(d[a].healthCheck={...j.healthCheck}),"type"===b?d[a]={...d[a],healthCheck:{...d[a].healthCheck,[b]:c}}:d[a]={...d[a],healthCheck:{...d[a].healthCheck,[b]:"string"==typeof c?c:parseInt(String(c),10)||0}},y({...x,taskGroups:d})},addTaskGroup:()=>{let a={...j,name:`${x.name?x.name+"-":""}group-${x.taskGroups.length+1}`};y({...x,taskGroups:[...x.taskGroups,a]})},removeTaskGroup:a=>{if(x.taskGroups.length<=1)return;let b=[...x.taskGroups];b.splice(a,1),y({...x,taskGroups:b})},handleSubmit:A}}a.s(["defaultTaskGroupData",0,j,"useJobForm",()=>l],90556);var m=a.i(75991),n=a.i(52784);a.s(["default",0,({title:a,error:b,success:c,isLoading:d,onSubmit:e,submitButtonText:f,children:g,cancelHref:h})=>(0,m.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:a}),b&&(0,m.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:b}),c&&(0,m.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md text-sm",children:c}),(0,m.jsxs)("form",{onSubmit:e,children:[g,(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("button",{type:"submit",className:`py-2 px-4 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors ${d?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:d,children:d?"Processing...":f}),h&&(0,m.jsx)(n.default,{href:h,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]})]})]})})],56104);let o=({id:a,name:b,label:c,type:d,value:e,onChange:f,disabled:g=!1,required:h=!1,placeholder:i="",min:j,max:k,className:l="",helpText:n,isInvalid:o=!1,errorMessage:p,options:q=[]})=>{let r=`w-full p-2 border ${o?"border-red-500 dark:border-monokai-red":"border-gray-300 dark:border-monokai-muted"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-monokai-blue bg-white dark:bg-monokai-surface text-gray-900 dark:text-monokai-text`;return"checkbox"===d?(0,m.jsxs)("div",{className:`flex items-center ${l}`,children:[(0,m.jsx)("input",{id:a,name:b,type:"checkbox",checked:e,onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded dark:border-monokai-muted dark:bg-monokai-surface",disabled:g,required:h}),(0,m.jsx)("label",{htmlFor:a,className:"ml-2 block text-sm font-medium text-gray-700 dark:text-monokai-text",children:c}),n&&(0,m.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-monokai-muted",children:n})]}):"select"===d?(0,m.jsxs)("div",{className:`mb-4 ${l}`,children:[(0,m.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700 dark:text-monokai-text mb-1",children:c}),(0,m.jsx)("select",{id:a,name:b,value:e,onChange:f,className:r,disabled:g,required:h,children:q.map(a=>(0,m.jsx)("option",{value:a.value,children:a.label},a.value))}),n&&(0,m.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-monokai-muted",children:n}),o&&p&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-monokai-red",children:p})]}):(0,m.jsxs)("div",{className:`mb-4 ${l}`,children:[(0,m.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700 dark:text-monokai-text mb-1",children:c}),(0,m.jsx)("input",{id:a,name:b,type:d,value:e,onChange:f,placeholder:i,className:r,disabled:g,required:h,min:j,max:k}),n&&(0,m.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-monokai-muted",children:n}),o&&p&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-monokai-red",children:p})]})};a.s(["default",0,o],43901);var p=a.i(74652);let q=(0,p.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),r=(0,p.default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),s=({title:a,children:c,defaultExpanded:d=!0,isRemovable:e=!1,onRemove:f,isPrimary:g=!1,isLoading:h=!1,className:i=""})=>{let[j,k]=(0,b.useState)(!d);return(0,m.jsxs)("div",{className:`border rounded-lg p-4 bg-gray-50 dark:bg-monokai-bg dark:border-monokai-muted relative ${i}`,children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("button",{type:"button",onClick:()=>k(!j),className:"mr-2 text-gray-500 hover:text-gray-700 dark:text-monokai-muted dark:hover:text-monokai-text focus:outline-none",children:(0,m.jsx)(q,{className:`h-5 w-5 transition-transform ${j?"":"transform rotate-90"}`})}),(0,m.jsxs)("h4",{className:"text-lg font-medium text-gray-900 dark:text-monokai-text",children:[a,g&&(0,m.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-monokai-surface dark:text-monokai-blue px-2 py-1 rounded",children:"Primary"})]})]}),e&&f&&(0,m.jsx)("button",{type:"button",onClick:f,className:"text-red-600 hover:text-red-800 dark:text-monokai-red dark:hover:text-red-400 focus:outline-none",disabled:h,children:(0,m.jsx)(r,{className:"h-5 w-5"})})]}),(0,m.jsx)("div",{className:`transition-all duration-200 overflow-hidden ${j?"max-h-0 opacity-0 invisible":"max-h-full opacity-100 visible"}`,children:c})]})},t=({dockerAuth:a,onInputChange:b,isLoading:c,groupIndex:d})=>(0,m.jsxs)("div",{className:"mb-6 p-4 border border-gray-200 rounded-md bg-gray-50",children:[(0,m.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Registry Credentials"}),(0,m.jsx)(o,{id:`group-${d}-dockerAuth.username`,name:"dockerAuth.username",label:"Username",type:"text",value:a?.username||"",onChange:b,disabled:c,required:!0}),(0,m.jsx)(o,{id:`group-${d}-dockerAuth.password`,name:"dockerAuth.password",label:"Password",type:"password",value:a?.password||"",onChange:b,disabled:c,required:!0})]}),u=({resources:a,onInputChange:b,isLoading:c,groupIndex:d})=>(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Resources"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)(o,{id:`group-${d}-resources.CPU`,name:"resources.CPU",label:"CPU (MHz)",type:"number",value:a.CPU,onChange:b,min:100,disabled:c}),(0,m.jsx)(o,{id:`group-${d}-resources.MemoryMB`,name:"resources.MemoryMB",label:"Memory (MB)",type:"number",value:a.MemoryMB,onChange:b,min:32,disabled:c}),(0,m.jsx)(o,{id:`group-${d}-resources.DiskMB`,name:"resources.DiskMB",label:"Disk (MB)",type:"number",value:a.DiskMB,onChange:b,min:10,disabled:c})]})]});var v=a.i(52838),w=a.i(25441);let x=({envVars:a,onEnvVarChange:c,onAddEnvVar:d,onRemoveEnvVar:e,isLoading:f})=>{let[g,h]=(0,b.useState)({}),i=a=>{h(b=>({...b,[a]:!b[a]}))};return(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,m.jsx)("h5",{className:"text-md font-medium text-gray-700",children:"Environment Variables"})}),0===a.length?(0,m.jsxs)("div",{className:"flex space-x-2 mb-2 items-center",children:[(0,m.jsx)("input",{type:"text",value:"",onChange:a=>c(0,"key",a.target.value),placeholder:"KEY",className:"w-1/3 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f}),(0,m.jsxs)("div",{className:"relative w-1/2",children:[(0,m.jsx)("input",{type:"password",value:"",onChange:a=>c(0,"value",a.target.value),placeholder:"value",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f}),(0,m.jsx)("button",{type:"button",onClick:()=>i(0),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",disabled:f,children:(0,m.jsx)(v.Eye,{size:16})})]}),(0,m.jsx)("button",{type:"button",onClick:d,className:"inline-flex items-center p-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:f,children:"Add"})]}):a.map((b,h)=>(0,m.jsxs)("div",{className:"flex space-x-2 mb-2 items-center",children:[(0,m.jsx)("input",{type:"text",value:b.key,onChange:a=>c(h,"key",a.target.value),placeholder:"KEY",className:"w-1/3 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f}),(0,m.jsxs)("div",{className:"relative w-1/2",children:[(0,m.jsx)("input",{type:g[h]?"text":"password",value:b.value,onChange:a=>c(h,"value",a.target.value),placeholder:"value",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f}),(0,m.jsx)("button",{type:"button",onClick:()=>i(h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",disabled:f,children:g[h]?(0,m.jsx)(w.EyeOff,{size:16}):(0,m.jsx)(v.Eye,{size:16})})]}),h===a.length-1?(0,m.jsx)("button",{type:"button",onClick:d,className:"flex justify-center items-center p-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:f,children:"Add"}):(0,m.jsx)("button",{type:"button",onClick:()=>e(h),className:"inline-flex items-center p-2 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 w-16",disabled:f,children:(0,m.jsx)(r,{size:16,className:"mx-auto"})}),h===a.length-1?null:(0,m.jsx)("div",{className:"w-16"})]},h))]})},y=({ports:a,onPortChange:b,onAddPort:c,onRemovePort:d,isLoading:e})=>(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,m.jsx)("h6",{className:"text-sm font-medium text-gray-700",children:"Ports"})}),0===a.length?(0,m.jsxs)("div",{className:"flex flex-wrap items-end gap-2 mb-2 p-2 border rounded-md bg-white",children:[(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Label"}),(0,m.jsx)("input",{type:"text",value:"",onChange:a=>b(0,"label",a.target.value),placeholder:"http",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Port Type"}),(0,m.jsxs)("select",{value:"false",onChange:a=>b(0,"static",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e,children:[(0,m.jsx)("option",{value:"false",children:"Dynamic"}),(0,m.jsx)("option",{value:"true",children:"Static"})]})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Host Port"}),(0,m.jsx)("span",{className:"block p-2 border bg-gray-100 text-gray-500 rounded-md h-10",children:"Dynamic"})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Container Port"}),(0,m.jsx)("input",{type:"number",value:"8080",onChange:a=>b(0,"to",a.target.value),placeholder:"8080",min:"1",max:"65535",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e})]}),(0,m.jsx)("div",{className:"h-10 flex items-center",children:(0,m.jsx)("button",{type:"button",onClick:c,className:"flex justify-center items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:e,children:"Add"})})]}):a.map((f,g)=>(0,m.jsxs)("div",{className:"flex flex-wrap items-end gap-2 mb-2 p-2 border rounded-md bg-white",children:[(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Label"}),(0,m.jsx)("input",{type:"text",value:f.label,onChange:a=>b(g,"label",a.target.value),placeholder:"http",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Port Type"}),(0,m.jsxs)("select",{value:f.static?"true":"false",onChange:a=>b(g,"static",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e,children:[(0,m.jsx)("option",{value:"false",children:"Dynamic"}),(0,m.jsx)("option",{value:"true",children:"Static"})]})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Host Port"}),f.static?(0,m.jsx)("input",{type:"number",value:f.value,onChange:a=>b(g,"value",a.target.value),placeholder:"8080",min:"1",max:"65535",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e}):(0,m.jsx)("span",{className:"block p-2 border bg-gray-100 text-gray-500 rounded-md h-10",children:"Dynamic"})]}),(0,m.jsxs)("div",{className:"w-1/5",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Container Port"}),(0,m.jsx)("input",{type:"number",value:f.to,onChange:a=>b(g,"to",a.target.value),placeholder:"8080",min:"1",max:"65535",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:e})]}),(0,m.jsx)("div",{className:"h-10 flex items-center",children:g===a.length-1?(0,m.jsx)("button",{type:"button",onClick:c,className:"flex justify-center items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-16",disabled:e,children:"Add"}):(0,m.jsx)("button",{type:"button",onClick:()=>d(g),className:"flex justify-center items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 w-16",disabled:e,children:(0,m.jsx)(r,{size:16})})})]},g))]}),z=({enableNetwork:a,networkMode:b,ports:c,onInputChange:d,onCheckboxChange:e,onPortChange:f,onAddPort:g,onRemovePort:h,isLoading:i,groupIndex:j})=>(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex items-center mb-2",children:(0,m.jsx)(o,{id:`group-${j}-enableNetwork`,name:"enableNetwork",label:"Enable Network Configuration",type:"checkbox",value:a,onChange:e,disabled:i,className:"mb-0"})}),a&&(0,m.jsxs)("div",{className:"border p-4 rounded-md bg-white",children:[(0,m.jsx)(o,{id:`group-${j}-networkMode`,name:"networkMode",label:"Network Mode",type:"select",value:b,onChange:d,disabled:i,helpText:"Select the container network mode. 'Bridge' is recommended for service discovery.",options:[{value:"bridge",label:"Bridge"},{value:"host",label:"Host"},{value:"none",label:"None"}]}),(0,m.jsx)(y,{ports:c,onPortChange:f,onAddPort:g,onRemovePort:h,isLoading:i})]})]}),A=({enableHealthCheck:a,healthCheck:b,onCheckboxChange:c,onHealthCheckChange:d,isLoading:e,groupIndex:f})=>b?(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("div",{className:"flex items-center mb-2",children:(0,m.jsx)(o,{id:`group-${f}-enableHealthCheck`,name:"enableHealthCheck",label:"Enable Health Check",type:"checkbox",value:a,onChange:c,disabled:e,className:"mb-0"})}),a&&(0,m.jsx)("div",{className:"border p-4 rounded-md bg-white",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsx)(o,{id:`group-${f}-healthCheck-type`,name:"healthCheck.type",label:"Check Type",type:"select",value:b.type,onChange:a=>d("type",a.target.value),disabled:e,options:[{value:"http",label:"HTTP"},{value:"tcp",label:"TCP"},{value:"script",label:"Script"}]}),"http"===b.type&&(0,m.jsx)(o,{id:`group-${f}-healthCheck-path`,name:"healthCheck.path",label:"HTTP Path",type:"text",value:b.path||"",onChange:a=>d("path",a.target.value),placeholder:"/health",disabled:e}),"script"===b.type&&(0,m.jsx)(o,{id:`group-${f}-healthCheck-command`,name:"healthCheck.command",label:"Script Command",type:"text",value:b.command||"",onChange:a=>d("command",a.target.value),placeholder:"/bin/check-health.sh",disabled:e}),(0,m.jsx)(o,{id:`group-${f}-healthCheck-interval`,name:"healthCheck.interval",label:"Check Interval (seconds)",type:"number",value:b.interval,onChange:a=>d("interval",a.target.value),min:1,disabled:e}),(0,m.jsx)(o,{id:`group-${f}-healthCheck-timeout`,name:"healthCheck.timeout",label:"Timeout (seconds)",type:"number",value:b.timeout,onChange:a=>d("timeout",a.target.value),min:1,disabled:e})]})})]}):null,B=({title:a,children:c,type:d="info",className:e=""})=>{let f={info:"bg-blue-100 dark:bg-monokai-bg",warning:"bg-yellow-100 dark:bg-monokai-bg",error:"bg-red-100 dark:bg-monokai-bg",success:"bg-green-100 dark:bg-monokai-bg"};return(0,m.jsxs)("div",{className:`p-3 border-l-4 rounded mb-4 ${{info:"bg-blue-50 border-blue-400 text-blue-700 dark:bg-monokai-surface dark:border-monokai-blue dark:text-monokai-blue",warning:"bg-yellow-50 border-yellow-400 text-yellow-700 dark:bg-monokai-surface dark:border-monokai-yellow dark:text-monokai-yellow",error:"bg-red-50 border-red-400 text-red-700 dark:bg-monokai-surface dark:border-monokai-red dark:text-monokai-red",success:"bg-green-50 border-green-400 text-green-700 dark:bg-monokai-surface dark:border-monokai-green dark:text-monokai-green"}[d]} ${e}`,children:[a&&(0,m.jsx)("h5",{className:"font-semibold text-sm",children:a}),(0,m.jsx)("div",{className:"text-xs mt-1 infobox-content",children:b.default.Children.map(c,a=>"string"==typeof a?a.split(/(<code>.*?<\/code>)/g).map((a,b)=>{if(a.startsWith("<code>")&&a.endsWith("</code>")){let c=a.slice(6,-7);return(0,m.jsx)("code",{className:`${f[d]} px-1 py-0.5 rounded`,children:c},b)}return a}):a)})]})},C=()=>(0,m.jsxs)(B,{title:"Nomad Runtime Environment Variables",type:"info",children:[(0,m.jsx)("p",{children:"Nomad injects these variables inside the container at runtime:"}),(0,m.jsxs)("ul",{className:"mt-1 ml-4 list-disc",children:[(0,m.jsxs)("li",{children:["General: ",(0,m.jsx)("code",{children:"NOMAD_ALLOC_ID"})," - Allocation ID"]}),(0,m.jsxs)("li",{children:["Network: ",(0,m.jsxs)("code",{children:["NOMAD_PORT_",(0,m.jsx)("em",{children:"label"})]})," - Port values"]}),(0,m.jsxs)("li",{children:["Network: ",(0,m.jsxs)("code",{children:["NOMAD_ADDR_",(0,m.jsx)("em",{children:"label"})]})," - IP:port for service ports"]}),(0,m.jsxs)("li",{children:["Tasks: ",(0,m.jsx)("code",{children:"NOMAD_TASK_NAME"})," - Name of the task"]})]}),(0,m.jsxs)("p",{className:"mt-2",children:["To see all variables: add a command like ",(0,m.jsx)("code",{children:"env | grep NOMAD"})," to your container"]})]}),D=({groupIndex:a,group:b,isFirst:c,onInputChange:d,onCheckboxChange:e,onEnvVarChange:f,onAddEnvVar:g,onRemoveEnvVar:h,onPortChange:i,onAddPort:j,onRemovePort:k,onHealthCheckChange:l,onRemoveGroup:n,jobName:p,namespace:q,isLoading:r})=>(0,m.jsxs)(s,{title:b.name||`Group ${a+1}`,isPrimary:c,isRemovable:!c,onRemove:n,isLoading:r,defaultExpanded:!0,children:[(0,m.jsx)(o,{id:`group-${a}-name`,name:"name",label:"Group Name",type:"text",value:b.name,onChange:d,placeholder:c?p||"main":`${p}-group-${a+1}`,disabled:r,required:!0,helpText:"A unique name for this task group. This name will be used for service discovery."}),(0,m.jsx)(o,{id:`group-${a}-count`,name:"count",label:"Count (Replicas)",type:"number",value:b.count,onChange:d,min:1,disabled:r,helpText:"Number of instances to run of this task group"}),(0,m.jsx)(o,{id:`group-${a}-image`,name:"image",label:"Docker Image",type:"text",value:b.image,onChange:d,placeholder:"nginx:latest",disabled:r,required:!0}),(0,m.jsx)(o,{id:`group-${a}-usePrivateRegistry`,name:"usePrivateRegistry",label:"Use Private Container Registry",type:"checkbox",value:b.usePrivateRegistry,onChange:e,disabled:r}),b.usePrivateRegistry&&(0,m.jsx)(t,{dockerAuth:b.dockerAuth,onInputChange:d,isLoading:r,groupIndex:a}),(0,m.jsx)(o,{id:`group-${a}-plugin`,name:"plugin",label:"Container Runtime",type:"select",value:b.plugin,onChange:d,disabled:r,options:[{value:"podman",label:"Podman"},{value:"docker",label:"Docker"}]}),(0,m.jsx)(u,{resources:b.resources,onInputChange:d,isLoading:r,groupIndex:a}),(0,m.jsx)(x,{envVars:b.envVars,onEnvVarChange:f,onAddEnvVar:g,onRemoveEnvVar:h,isLoading:r}),(0,m.jsx)(z,{enableNetwork:b.enableNetwork,networkMode:b.networkMode,ports:b.ports,onInputChange:d,onCheckboxChange:e,onPortChange:i,onAddPort:j,onRemovePort:k,isLoading:r,groupIndex:a}),(0,m.jsx)(A,{enableHealthCheck:b.enableHealthCheck,healthCheck:b.healthCheck,onCheckboxChange:e,onHealthCheckChange:l,isLoading:r,groupIndex:a}),(0,m.jsx)(C,{})]});a.s(["default",0,({taskGroups:a,jobName:b,namespace:c,isLoading:d,onAddTaskGroup:e,onGroupInputChange:f,onGroupCheckboxChange:g,onEnvVarChange:h,onAddEnvVar:i,onRemoveEnvVar:j,onPortChange:k,onAddPort:l,onRemovePort:n,onHealthCheckChange:o,onRemoveTaskGroup:p})=>(0,m.jsxs)("div",{className:"mb-6 border-t pt-4",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Task Groups"}),(0,m.jsx)("button",{type:"button",onClick:e,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:d,children:"Add Task Group"})]}),(0,m.jsx)("div",{className:"space-y-6",children:a.map((a,e)=>(0,m.jsx)(D,{groupIndex:e,group:a,isFirst:0===e,onInputChange:a=>f(e,a),onCheckboxChange:a=>g(e,a),onEnvVarChange:(a,b,c)=>h(e,a,b,c),onAddEnvVar:()=>i(e),onRemoveEnvVar:a=>j(e,a),onPortChange:(a,b,c)=>k(e,a,b,c),onAddPort:()=>l(e),onRemovePort:a=>n(e,a),onHealthCheckChange:(a,b)=>o(e,a,b),onRemoveGroup:()=>p(e),jobName:b,namespace:c,isLoading:d},e))})]})],38793),a.s(["default",0,({datacenters:a,onInputChange:b,isLoading:c})=>(0,m.jsxs)("div",{className:"mb-6 border p-4 rounded-md bg-gray-50",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Advanced Settings"}),(0,m.jsx)(o,{id:"datacenters",name:"datacenters",label:"Datacenters",type:"text",value:a.join(", "),onChange:b,placeholder:"dc1, dc2, dc3",disabled:c,helpText:"Comma-separated list of datacenters where this job can run"})]})],88348),a.s(["default",0,({showAdvancedSettings:a,setShowAdvancedSettings:b})=>(0,m.jsx)("div",{className:"mb-6 border-t pt-4",children:(0,m.jsx)("button",{type:"button",onClick:()=>b(!a),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:a?"Hide Advanced Settings":"Show Advanced Settings"})})],96551)}];

//# sourceMappingURL=nomad-compass_src_hooks_useJobForm_ts_289dfe40._.js.map