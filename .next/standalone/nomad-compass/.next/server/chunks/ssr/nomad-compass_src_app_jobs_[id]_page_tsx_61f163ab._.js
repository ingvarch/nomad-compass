module.exports=[51750,a=>{"use strict";var b=a.i(75991),c=a.i(80971),d=a.i(95892),e=a.i(52784),f=a.i(35774),g=a.i(89676),h=a.i(90795),i=a.i(74652);let j=(0,i.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),k=(0,i.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),l=(0,i.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),m=({jobId:a,allocId:d,taskName:e,initialTaskGroup:f})=>{let{token:i,nomadAddr:m}=(0,g.useAuth)(),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)("stdout"),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(5),J=(0,c.useRef)(null),[K,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{f&&f!==D&&(s(null),E(f))},[f]),(0,c.useEffect)(()=>{(async()=>{if(!i||!m){s("Authentication required"),q(!1);return}try{let b=(0,h.createNomadClient)(m,i),c=new URLSearchParams(window.location.search).get("namespace")||"default",d=await b.getJob(a,c);d&&d.TaskGroups&&(C(d.TaskGroups),!D&&d.TaskGroups.length>0&&E(d.TaskGroups[0].Name))}catch(a){console.error("Failed to fetch job data:",a),s("Failed to load job data. Please try again.")}})()},[a,i,m,D]),(0,c.useEffect)(()=>{let b=async()=>{if(!i||!m){s("Authentication required"),q(!1);return}try{let b=(0,h.createNomadClient)(m,i),c=new URLSearchParams(window.location.search).get("namespace")||"default",f=(await b.getJobAllocations(a,c)).filter(a=>D?"running"===a.ClientStatus&&a.TaskGroup===D:"running"===a.ClientStatus);if(u(f),f.length>0){let a=d||f[0].ID;w(a);let c=await b.getAllocation(a),g=Object.keys(c.TaskStates||{});g.length>0&&y(e||g[0])}else w(null),y(null),o("No running allocations for this task group");s(null),q(!1)}catch(a){console.error("Failed to fetch allocations:",a),s("Failed to load job allocations. Please try again."),q(!1)}};if(D){o(""),w(null),y(null),q(!0);let a=setTimeout(()=>{b()},300);return()=>clearTimeout(a)}},[a,i,m,d,e,D]);let M=(0,c.useCallback)(async()=>{if(i&&m&&v&&x){q(!0);try{let a=(0,h.createNomadClient)(m,i),b=await a.getAllocationLogs(v,x,z,!0);o(b.Data||"No logs available"),L(new Date),s(null)}catch(a){console.error("Failed to fetch logs:",a),s("Failed to load logs. Please try again."),o("")}finally{q(!1)}}},[v,x,z,i,m]);return((0,c.useEffect)(()=>{v&&x&&M()},[v,x,z,M]),(0,c.useEffect)(()=>(J.current&&(clearInterval(J.current),J.current=null),F&&v&&x&&(J.current=setInterval(()=>{M()},1e3*H)),()=>{J.current&&clearInterval(J.current)}),[F,H,v,x,M]),!r||t.length||D)?!p||t.length||B.length?(0,b.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-wrap justify-between items-center",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Job Logs"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2 sm:mt-0",children:[B.length>0&&(0,b.jsxs)("select",{value:D||"",onChange:a=>{E(a.target.value),w(null),y(null)},className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,b.jsx)("option",{value:"",children:"Select Task Group"}),B.map(a=>(0,b.jsx)("option",{value:a.Name,children:a.Name},a.Name))]}),t.length>1&&(0,b.jsx)("select",{value:v||"",onChange:a=>w(a.target.value),className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:t.map(a=>(0,b.jsxs)("option",{value:a.ID,children:[a.ID.substring(0,8),"... - ",a.ClientStatus]},a.ID))}),v&&(0,b.jsx)("select",{value:x||"",onChange:a=>y(a.target.value),className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:t.find(a=>a.ID===v)?.TaskStates&&Object.keys(t.find(a=>a.ID===v)?.TaskStates||{}).map(a=>(0,b.jsx)("option",{value:a,children:a},a))}),(0,b.jsxs)("select",{value:z,onChange:a=>A(a.target.value),className:"block w-full sm:w-auto pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,b.jsx)("option",{value:"stdout",children:"stdout"}),(0,b.jsx)("option",{value:"stderr",children:"stderr"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{G(a=>!a)},className:`inline-flex items-center px-2 py-1 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${F?"text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500":"text-gray-700 bg-gray-100 hover:bg-gray-200 focus:ring-gray-500"}`,title:F?"Disable auto-refresh":"Enable auto-refresh",children:[F?(0,b.jsx)(k,{size:16}):(0,b.jsx)(l,{size:16}),(0,b.jsx)("span",{className:"ml-1",children:"Auto"})]}),F&&(0,b.jsxs)("select",{value:H,onChange:a=>{I(Number(a.target.value))},className:"block w-full sm:w-auto pl-2 pr-7 py-1 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,b.jsx)("option",{value:"2",children:"2s"}),(0,b.jsx)("option",{value:"5",children:"5s"}),(0,b.jsx)("option",{value:"10",children:"10s"}),(0,b.jsx)("option",{value:"30",children:"30s"}),(0,b.jsx)("option",{value:"60",children:"60s"})]}),(0,b.jsx)("button",{onClick:()=>{M()},className:"inline-flex items-center px-2 py-1 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:p||!v||!x,title:"Refresh logs",children:(0,b.jsx)(j,{size:16,className:p?"animate-spin":""})})]})]})]}),(0,b.jsxs)("div",{className:"p-6",children:[p&&!n&&(0,b.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),r&&(0,b.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,b.jsx)("span",{className:"block sm:inline",children:r})}),!D&&(0,b.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,b.jsx)("div",{className:"ml-3",children:(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:"Please select a task group to view logs."})})]})}),D&&0===t.length&&(0,b.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,b.jsx)("div",{className:"ml-3",children:(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:"No running allocations found for the selected task group."})})]})}),(0,b.jsxs)("div",{className:"mb-2 flex justify-between items-center text-xs text-gray-500",children:[K&&(0,b.jsxs)("span",{children:["Last updated: ",K.toLocaleTimeString()]}),F&&(0,b.jsxs)("span",{children:["Auto-refreshing every ",H," seconds"]})]}),(0,b.jsx)("pre",{className:`bg-gray-800 text-white p-4 rounded-md overflow-auto max-h-96 text-sm font-mono ${p?"opacity-50":""}`,children:n||"No logs available"})]})]}):(0,b.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):(0,b.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,b.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,b.jsx)("span",{className:"block sm:inline",children:r})]})};var n=a.i(18409),o=a.i(62278);let p=(0,i.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),q=({jobId:a,jobStatus:e,onStatusChange:f})=>{let i=(0,d.useRouter)(),{token:j,nomadAddr:k}=(0,g.useAuth)(),{addToast:l}=(0,n.useToast)(),[m,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),v=e?.toLowerCase()==="dead";e?.toLowerCase();let w=a=>{u(a),setTimeout(()=>{t===a&&u(null)},1e4)},x=()=>{u(null)},y=async()=>{q(!0),s(null),u(null);try{if(!j||!k)throw Error("Authentication required");let b=(0,h.createNomadClient)(k,j),c=new URLSearchParams(window.location.search).get("namespace")||"default",d=await b.getJob(a,c);if(!d||!d.ID)throw Error("Could not retrieve job specification");!0===d.Stop&&(d.Stop=!1),d.Namespace=c,await b.createJob({Job:d}),l("Job started successfully","success"),f&&f(),i.refresh()}catch(b){console.error("Failed to start job:",b);let a="object"==typeof b&&null!==b&&"message"in b?b.message:"Failed to start job. Please try again.";s(a),l(a,"error")}finally{q(!1)}},z=async()=>{q(!0),s(null),u(null);try{if(!j||!k)throw Error("Authentication required");let b=(0,h.createNomadClient)(k,j),c=new URLSearchParams(window.location.search).get("namespace")||"default";await b.stopJob(a,c),l("Job stopped successfully","success"),f&&f(),i.refresh()}catch(b){console.error("Failed to stop job:",b);let a="object"==typeof b&&null!==b&&"message"in b?b.message:"Failed to stop job. Please try again.";s(a),l(a,"error")}finally{q(!1)}},A=async()=>{q(!0),s(null),u(null);try{if(!j||!k)throw Error("Authentication required");let b=(0,h.createNomadClient)(k,j),c=new URLSearchParams(window.location.search).get("namespace")||"default";await b.deleteJob(a,c),l("Job deleted successfully","success"),i.push("/jobs")}catch(b){console.error("Failed to delete job:",b);let a="object"==typeof b&&null!==b&&"message"in b?b.message:"Failed to delete job. Please try again.";s(a),l(a,"error")}finally{q(!1)}},B="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2",C="bg-green-600 hover:bg-green-700 focus:ring-green-500",D="bg-gray-500 hover:bg-gray-600 focus:ring-gray-400 ml-2";return(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&(0,b.jsx)("div",{className:"text-red-600 text-sm mr-2",children:r}),v?(0,b.jsxs)(b.Fragment,{children:["start"===t?(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Start job?"}),(0,b.jsxs)("button",{onClick:y,disabled:m,className:`${B} ${C}`,children:[(0,b.jsx)(p,{size:16,className:"mr-1"})," Yes, Start"]}),(0,b.jsxs)("button",{onClick:x,disabled:m,className:`${B} ${D}`,children:[(0,b.jsx)(o.X,{size:16,className:"mr-1"})," Cancel"]})]}):(0,b.jsx)("button",{onClick:()=>w("start"),disabled:m,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:m?"Working...":"Start"}),"delete"===t?(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Delete permanently?"}),(0,b.jsxs)("button",{onClick:A,disabled:m,className:`${B} ${C}`,children:[(0,b.jsx)(p,{size:16,className:"mr-1"})," Yes, Delete"]}),(0,b.jsxs)("button",{onClick:x,disabled:m,className:`${B} ${D}`,children:[(0,b.jsx)(o.X,{size:16,className:"mr-1"})," Cancel"]})]}):"start"!==t&&(0,b.jsx)("button",{onClick:()=>w("delete"),disabled:m,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:m?"Working...":"Delete"})]}):(0,b.jsx)(b.Fragment,{children:"stop"===t?(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Stop job?"}),(0,b.jsxs)("button",{onClick:z,disabled:m,className:`${B} ${C}`,children:[(0,b.jsx)(p,{size:16,className:"mr-1"})," Yes, Stop"]}),(0,b.jsxs)("button",{onClick:x,disabled:m,className:`${B} ${D}`,children:[(0,b.jsx)(o.X,{size:16,className:"mr-1"})," Cancel"]})]}):(0,b.jsx)("button",{onClick:()=>w("stop"),disabled:m,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:m?"Working...":"Stop"})})]})},r=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var s=a.i(52838),t=a.i(25441);let u=({envVars:a})=>{let[d,e]=(0,c.useState)({}),[f,g]=(0,c.useState)(null);return a&&0!==Object.keys(a).length?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(a).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center bg-gray-50 p-2 rounded-md border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex-grow mr-2",children:[(0,b.jsx)("div",{className:"font-medium text-sm text-gray-700",children:a}),(0,b.jsx)("div",{className:"text-sm text-gray-500 font-mono",children:d[a]?c:"••••••••••••••••"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{e(b=>({...b,[a]:!b[a]}))},className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1 rounded-md hover:bg-gray-100",title:d[a]?"Hide value":"Show value",children:d[a]?(0,b.jsx)(t.EyeOff,{size:16}):(0,b.jsx)(s.Eye,{size:16})}),(0,b.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(c).then(()=>{g(a),setTimeout(()=>g(null),2e3)}).catch(a=>{console.error("Failed to copy:",a)})},className:"text-gray-500 hover:text-gray-700 focus:outline-none p-1 rounded-md hover:bg-gray-100",title:"Copy to clipboard",children:[(0,b.jsx)(r,{size:16}),f===a&&(0,b.jsx)("span",{className:"absolute -ml-8 -mt-8 bg-black text-white text-xs px-2 py-1 rounded opacity-80",children:"Copied!"})]})]})]},a))}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No environment variables defined"})};function v(){let a=(0,d.useParams)(),i=(0,d.useSearchParams)(),j=(0,d.useRouter)(),{token:k,nomadAddr:l}=(0,g.useAuth)(),{addToast:o}=(0,n.useToast)(),[p,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)({}),z=(0,c.useRef)(null),[A,B]=(0,c.useState)(null),C=a.id,D=i.get("namespace")||"default",E=(0,c.useCallback)(async()=>{if(!k||!l){w("Authentication required"),t(!1);return}t(!0);try{let a=(0,h.createNomadClient)(l,k),b=await a.getJob(C,D);if(r(b),b.TaskGroups&&b.TaskGroups.length>0){let a={};b.TaskGroups.forEach(b=>{a[b.Name]=!1,a[`${b.Name}-container`]=!1}),y(a)}w(null)}catch(a){console.error("Failed to fetch job details:",a),w("Failed to load job details. Please check your connection and try again."),o("Failed to load job details","error")}finally{t(!1)}},[k,l,C,D,o]);(0,c.useEffect)(()=>{E()},[E]);let F=a=>new Date(1e3*a).toLocaleString();return s?(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):v?(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,b.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,b.jsx)("span",{className:"block sm:inline",children:v})]})}):p?(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:p.Name||p.ID}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Job ID: ",p.ID]}),(0,b.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:["Namespace: ",p.Namespace||"default"]})]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(e.default,{href:`/jobs/${p.ID}/edit?namespace=${p.Namespace||"default"}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit"}),(0,b.jsx)(e.default,{href:"/jobs",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Jobs"})]})]}),(0,b.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Job Summary"})}),(0,b.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("dl",{children:[(0,b.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,b.jsxs)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"running"===p.Status?"bg-green-100 text-green-800":"pending"===p.Status?"bg-yellow-100 text-yellow-800":p.Stop?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:[p.Status," ",p.Stop?"(Stopped)":""]})})]}),(0,b.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Type"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p.Type})]}),(0,b.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Priority"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p.Priority})]}),(0,b.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Datacenters"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p.Datacenters&&p.Datacenters.join(", ")})]})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("dl",{children:[(0,b.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p.CreateTime?F(p.CreateTime):"Unknown"})]}),(0,b.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Modified"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p.ModifyTime?F(p.ModifyTime):"Unknown"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 rounded-md",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Namespace"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,b.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:p.Namespace||"default"})})]}),(0,b.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Version"}),(0,b.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p.Version||"Unknown"})]})]})})]})]}),p.TaskGroups&&p.TaskGroups.length>0&&(0,b.jsx)("div",{className:"space-y-6",children:p.TaskGroups.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 flex items-center cursor-pointer",onClick:()=>{var b;return b=a.Name,void y({...x,[b]:!x[b]})},children:[(0,b.jsx)("svg",{className:`h-5 w-5 text-gray-500 transition-transform mr-2 ${x[a.Name]?"transform rotate-90":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,b.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Task Group: ",a.Name,(0,b.jsxs)("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800",children:["Count: ",a.Count]})]})]}),x[a.Name]&&(0,b.jsxs)("div",{className:"p-6",children:[a&&a.Networks&&a.Networks.length?a.Networks.map((a,c)=>{let d=a.DynamicPorts&&a.DynamicPorts.length>0,e=a.ReservedPorts&&a.ReservedPorts.length>0;return d||e?(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:["Network Configuration (Mode: ",a.Mode,")"]}),d&&(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Dynamic Ports"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Label"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Host Port"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Container Port"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.DynamicPorts.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Label}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,b.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Dynamic"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.To||a.Value||"-"})]},c))})]})})]}),e&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Static Ports"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Label"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Host Port"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Container Port"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.ReservedPorts.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Label}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Value}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.To||a.Value||"-"})]},c))})]})})]})]},c):null}):null,a&&a.Services&&a.Services.length?a.Services.map((a,c)=>a.Checks&&a.Checks.length?(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:["Health Check for ",a.Name]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Path/Command"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interval"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timeout"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check Restart"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.Checks.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Type}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Path||a.Command||"-"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Interval?`${Math.round(a.Interval/1e9)}s`:"-"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.Timeout?`${Math.round(a.Timeout/1e9)}s`:"-"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.CheckRestart?(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{children:["Limit: ",a.CheckRestart.Limit]}),(0,b.jsx)("br",{}),(0,b.jsxs)("span",{children:["Grace: ",Math.round(a.CheckRestart.Grace/1e9),"s"]})]}):"-"})]},c))})]})})]},c):null):null,(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:"Container"}),(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-white mt-2",children:[(0,b.jsxs)("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-gray-50",onClick:b=>{b.stopPropagation();let c=`${a.Name}-container`;y({...x,[c]:!x[c]})},children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:`h-5 w-5 text-gray-500 transition-transform ${x[`${a.Name}-container`]?"transform rotate-90":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,b.jsx)("h5",{className:"text-md font-medium text-gray-900 ml-2",children:a.Tasks[0].Name})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-600 text-white hover:bg-blue-700",onClick:b=>{b.stopPropagation(),B(a.Name),z.current?.scrollIntoView({behavior:"smooth"})},children:"View Logs"})})]}),x[`${a.Name}-container`]&&(0,b.jsxs)("div",{className:"p-4 border-t",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,b.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Task Details"}),(0,b.jsxs)("dl",{className:"divide-y divide-gray-200",children:[(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,b.jsx)("dd",{className:"text-sm text-gray-900",children:a.Tasks[0].Name})]}),(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Driver"}),(0,b.jsx)("dd",{className:"text-sm text-gray-900",children:a.Tasks[0].Driver})]}),(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Image"}),(0,b.jsx)("dd",{className:"text-sm text-gray-900 break-words",children:a.Tasks[0].Config?.image||"-"})]}),a.Tasks[0].Leader&&(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Leader"}),(0,b.jsx)("dd",{className:"text-sm text-gray-900",children:"Yes"})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,b.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resources"}),(0,b.jsxs)("dl",{className:"divide-y divide-gray-200",children:[(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"CPU"}),(0,b.jsxs)("dd",{className:"text-sm text-gray-900",children:[a.Tasks[0].Resources?.CPU||0," MHz"]})]}),(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Memory"}),(0,b.jsxs)("dd",{className:"text-sm text-gray-900",children:[a.Tasks[0].Resources?.MemoryMB||0," MB"]})]}),(0,b.jsxs)("div",{className:"py-2 grid grid-cols-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Disk"}),(0,b.jsxs)("dd",{className:"text-sm text-gray-900",children:[a.Tasks[0].Resources?.DiskMB||0," MB"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,b.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Environment Variables"}),a.Tasks[0].Env&&Object.keys(a.Tasks[0].Env).length>0?(0,b.jsx)(u,{envVars:a.Tasks[0].Env}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No environment variables defined"})]})]}),a.Tasks[0].Config&&Object.keys(a.Tasks[0].Config).filter(a=>"image"!==a&&"auth"!==a).length>0&&(0,b.jsxs)("div",{className:"mt-4 bg-gray-50 p-4 rounded-md",children:[(0,b.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Configuration"}),(0,b.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-auto max-h-40",children:JSON.stringify(Object.entries(a.Tasks[0].Config).filter(([a])=>"image"!==a&&"auth"!==a).reduce((a,[b,c])=>({...a,[b]:c}),{}),null,2)})]})]})]})]})]})]},c))}),(0,b.jsx)("div",{ref:z,className:"mt-6",children:p.ID&&(0,b.jsx)(m,{jobId:p.ID,initialTaskGroup:A})}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("div",{className:"flex space-x-4",children:(0,b.jsx)(q,{jobId:p.ID,jobStatus:p.Status,onStatusChange:()=>{E()}})}),(0,b.jsx)("button",{onClick:()=>j.push("/jobs"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back"})]})]})}):(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,b.jsx)("div",{className:"ml-3",children:(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:"Job not found."})})]})})})}a.s(["default",()=>v],51750)}];

//# sourceMappingURL=nomad-compass_src_app_jobs_%5Bid%5D_page_tsx_61f163ab._.js.map