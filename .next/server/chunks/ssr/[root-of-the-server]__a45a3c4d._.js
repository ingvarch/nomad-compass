module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},28729,(a,b,c)=>{"use strict";b.exports=a.r(84517).vendored.contexts.AppRouterContext},29741,(a,b,c)=>{"use strict";b.exports=a.r(84517).vendored.contexts.HooksClientContext},93601,(a,b,c)=>{"use strict";b.exports=a.r(84517).vendored.contexts.ServerInsertedHtml},44791,(a,b,c)=>{"use strict";b.exports=a.r(84517).vendored["react-ssr"].ReactServerDOMTurbopackClient},75066,a=>{"use strict";var b=a.i(75991),c=a.i(80971),d=a.i(74652);let e=(0,d.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),f=(0,d.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);var g=a.i(34694);let h=({className:a=""})=>{let{effectiveTheme:c,toggleTheme:d}=(0,g.useTheme)();return(0,b.jsx)("button",{onClick:d,className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
        text-gray-500 hover:text-gray-700 hover:bg-gray-100
        dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
        dark:focus:ring-offset-monokai-bg ${a}`,"aria-label":"dark"===c?"Switch to light mode":"Switch to dark mode",children:"dark"===c?(0,b.jsx)(e,{className:"h-5 w-5"}):(0,b.jsx)(f,{className:"h-5 w-5"})})};a.s(["ThemeToggle",0,({className:a=""})=>{let[d,e]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{e(!0)},[]),d)?(0,b.jsx)(h,{className:a}):(0,b.jsx)("button",{className:`inline-flex items-center justify-center p-2 rounded-md transition-colors
          text-gray-500 hover:text-gray-700 hover:bg-gray-100
          dark:text-monokai-muted dark:hover:text-monokai-text dark:hover:bg-monokai-surface
          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nomad-500
          dark:focus:ring-offset-monokai-bg ${a}`,"aria-label":"Toggle theme",children:(0,b.jsx)(f,{className:"h-5 w-5"})})}],75066)},90795,a=>{"use strict";class b{baseUrl;token;constructor(a,b){console.log("Initializing NomadClient with:",{nomadAddr:a,token:b}),this.baseUrl=a.endsWith("/")?a.slice(0,-1):a,console.log("Using direct baseUrl:",this.baseUrl),this.token=b}async request(a,b={}){let{params:c,...d}=b,e=`${this.baseUrl}${a}`;if(c){let a=new URLSearchParams;Object.entries(c).forEach(([b,c])=>{a.append(b,String(c))}),e=`${e}?${a.toString()}`}let f={"X-Nomad-Token":this.token,"Content-Type":"application/json",...d.headers};try{let a=await fetch(e,{...d,headers:f});if(!a.ok){let b=await a.json().catch(()=>({}));throw{statusCode:a.status,message:b.error||`API request failed with status ${a.status}`}}if(a.headers.get("content-type")?.includes("application/json"))return await a.json();return{Data:await a.text()}}catch(a){if(a.statusCode)throw a;throw{statusCode:0,message:`Network error: ${a.message}`}}}async getJobs(a){try{let b={};a?b.namespace=a:b.namespace="*";let c=await this.request("/v1/jobs",{method:"GET",params:b});return console.log("Processed jobs:",c),{Jobs:c}}catch(a){throw console.error("Error in getJobs():",a),a}}async getJob(a,b="default"){return this.request(`/v1/job/${a}`,{params:{namespace:b}})}async createJob(a){return this.request("/v1/jobs",{method:"POST",body:JSON.stringify(a)})}async updateJob(a){return this.createJob(a)}async stopJob(a,b="default"){return this.request(`/v1/job/${a}`,{method:"DELETE",params:{namespace:b}})}async deleteJob(a,b="default"){return this.request(`/v1/job/${a}`,{method:"DELETE",params:{namespace:b,purge:"true"}})}async getJobAllocations(a,b="default"){return this.request(`/v1/job/${a}/allocations`,{params:{namespace:b}})}async getAllocation(a){return this.request(`/v1/allocation/${a}`)}async getAllocationLogs(a,b,c,d=!0){return this.request(`/v1/client/fs/logs/${a}`,{method:"GET",params:{task:b,type:c,plain:d}})}async getPlugins(){return this.request("/v1/plugins")}async getNamespaces(){try{return this.request("/v1/namespaces")}catch(a){return console.error("Failed to fetch namespaces:",a),[{Name:"default"}]}}async validateConnection(){try{return await this.request("/v1/agent/self"),!0}catch(a){return!1}}}function c(a,c){return new b(a,c)}a.s(["createNomadClient",()=>c])},52838,25441,a=>{"use strict";var b=a.i(74652);let c=(0,b.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>c],52838);let d=(0,b.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>d],25441)},71558,a=>{"use strict";var b=a.i(75991),c=a.i(95892),d=a.i(35774),e=a.i(80971),f=a.i(89676),g=a.i(90795),h=a.i(42993),i=a.i(18409),j=a.i(90556),k=a.i(52784),l=a.i(56104),m=a.i(38793),n=a.i(88348),o=a.i(96551),p=a.i(43901);let q=({jobId:a,namespace:d="default"})=>{let[q,r]=(0,e.useState)(!1),{formData:s,initialJob:t,isLoading:u,isSaving:v,isLoadingNamespaces:w,error:x,success:y,namespaces:z,handleInputChange:A,handleGroupInputChange:B,handleSelectChange:C,handleGroupCheckboxChange:D,handleEnvVarChange:E,addEnvVar:F,removeEnvVar:G,handlePortChange:H,addPort:I,removePort:J,handleHealthCheckChange:K,addTaskGroup:L,removeTaskGroup:M,handleSubmit:N}=function(a,b="default"){let d=(0,c.useRouter)(),{token:k,nomadAddr:l}=(0,f.useAuth)(),{addToast:m}=(0,i.useToast)(),[n,o]=(0,e.useState)(!0),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[t,u]=(0,e.useState)(null),[v,w]=(0,e.useState)(["default"]),[x,y]=(0,e.useState)(!0),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{if(!k||!l)return y(!1);try{let a=(0,g.createNomadClient)(l,k),b=await a.getNamespaces();if(b&&Array.isArray(b)){let a=b.map(a=>a.Name);w(a.length>0?a:["default"])}}catch(a){console.error("Failed to fetch namespaces:",a),w(["default"])}finally{y(!1)}})()},[k,l]);let D=(0,e.useCallback)(async()=>{if(!k||!l||!a){s("Authentication or job ID required"),o(!1);return}o(!0);try{let c=(0,g.createNomadClient)(l,k),d=await c.getJob(a,b);A(d);let e=(0,h.convertJobToFormData)(d);e.taskGroups=e.taskGroups.map(a=>({...a,envVars:a.envVars||[]})),C(e),s(null)}catch(a){console.error("Failed to fetch job details:",a),s("object"==typeof a&&null!==a&&"message"in a?a.message:"Failed to load job details. Please check your connection and try again."),m("Failed to load job details","error")}finally{o(!1)}},[k,l,a,b,m]);(0,e.useEffect)(()=>{D()},[D]);let E=a=>{if(!B)return;let b=[...B.taskGroups],c=b[a].envVars||[];b[a]={...b[a],envVars:[...c,{key:"",value:""}]},C({...B,taskGroups:b})};(0,e.useEffect)(()=>{B&&B.taskGroups.forEach((a,b)=>{a.envVars&&0!==a.envVars.length||E(b)})},[B]);let F=async c=>{c.preventDefault(),s(null),u(null),q(!0);try{if(!k||!l||!B||!z)throw Error("Authentication required or form data missing");for(let a=0;a<B.taskGroups.length;a++){let b=B.taskGroups[a];if(!b.name.trim())throw Error(`Group ${a+1} name is required`);if(!b.image.trim())throw Error(`Image for group ${a+1} is required`);if(b.usePrivateRegistry){if(!b.dockerAuth?.username)throw Error(`Username is required for private registry in group ${a+1}`);if(!b.dockerAuth?.password)throw Error(`Password is required for private registry in group ${a+1}`)}if(b.envVars&&(b.envVars=b.envVars.filter(a=>""!==a.key.trim()||""!==a.value.trim())),b.enableNetwork&&b.ports.length>0)for(let c=0;c<b.ports.length;c++){let d=b.ports[c];if(!d.label)throw Error(`Port label is required for port ${c+1} in group ${a+1}`);if(d.static&&(!d.value||d.value<=0||d.value>65535))throw Error(`Valid port value (1-65535) is required for static port ${c+1} in group ${a+1}`)}}let c=(0,h.updateJobSpec)(z,B);console.log("Updated job spec:",JSON.stringify(c,null,2));let e=(0,g.createNomadClient)(l,k);await e.updateJob(c),u(`Job "${B.name}" updated successfully!`),setTimeout(()=>{d.push(`/jobs/${a}?namespace=${b}`)},2e3)}catch(a){console.error("Failed to update job:",a),s("object"==typeof a&&null!==a&&"message"in a?a.message:"Failed to update job. Please check your inputs and try again."),m("Failed to update job","error")}finally{q(!1)}};return{formData:B,initialJob:z,isLoading:n,isSaving:p,isLoadingNamespaces:x,error:r,success:t,namespaces:v,handleInputChange:a=>{if(!B)return;let{name:b,value:c,type:d}=a.target,e="number"===d?Number(c):c;"datacenters"===b?C({...B,datacenters:c.split(",").map(a=>a.trim())}):C({...B,[b]:e})},handleGroupInputChange:(a,b)=>{if(!B)return;let{name:c,value:d,type:e}=b.target,f="number"===e?Number(d):d,g=[...B.taskGroups],h=c.split(".");if(1===h.length)g[a]={...g[a],[c]:f};else if(2===h.length&&"resources"===h[0]){let b=h[1];g[a]={...g[a],resources:{...g[a].resources,[b]:parseInt(d,10)}}}else if(2===h.length&&"dockerAuth"===h[0]){let b=h[1];g[a]={...g[a],dockerAuth:{...g[a].dockerAuth,[b]:d}}}else if(2===h.length&&"healthCheck"===h[0]){let b=h[1];g[a]={...g[a],healthCheck:{...g[a].healthCheck,[b]:"number"===e?parseInt(d,10):d}}}C({...B,taskGroups:g})},handleSelectChange:(a,b)=>{if(!B)return;let{name:c,value:d}=b.target,e=[...B.taskGroups];e[a]={...e[a],[c]:d},C({...B,taskGroups:e})},handleGroupCheckboxChange:(a,b)=>{if(!B)return;let{name:c,checked:d}=b.target,e=[...B.taskGroups];e[a]={...e[a],[c]:d},C({...B,taskGroups:e})},handleEnvVarChange:(a,b,c,d)=>{if(!B)return;let e=[...B.taskGroups],f=[...e[a].envVars||[]];f[b]||(f[b]={key:"",value:""}),f[b]={...f[b],[c]:d},e[a]={...e[a],envVars:f},C({...B,taskGroups:e})},addEnvVar:E,removeEnvVar:(a,b)=>{if(!B)return;let c=[...B.taskGroups],d=[...c[a].envVars||[]];d.length<=1?c[a]={...c[a],envVars:[]}:(d.splice(b,1),c[a]={...c[a],envVars:d}),C({...B,taskGroups:c})},handlePortChange:(a,b,c,d)=>{if(!B)return;let e=[...B.taskGroups],f=[...e[a].ports];if("static"===c){let a="true"===d;f[b]={...f[b],[c]:a},a&&!f[b].value&&(f[b].value=8080+b)}else"label"===c?f[b]={...f[b],[c]:d}:f[b]={...f[b],[c]:parseInt(d,10)||0};e[a]={...e[a],ports:f},C({...B,taskGroups:e})},addPort:a=>{if(!B)return;let b=[...B.taskGroups];b[a]={...b[a],ports:[...b[a].ports,{label:"",value:0,to:8080,static:!1}]},C({...B,taskGroups:b})},removePort:(a,b)=>{if(!B)return;let c=[...B.taskGroups];if(c[a].ports.length<=1){c[a]={...c[a],ports:[{label:"",value:0,to:0,static:!1}]};return}let d=[...c[a].ports];d.splice(b,1),c[a]={...c[a],ports:d},C({...B,taskGroups:c})},handleHealthCheckChange:(a,b,c)=>{if(!B)return;let d=[...B.taskGroups];d[a].healthCheck||(d[a].healthCheck={...j.defaultTaskGroupData.healthCheck}),"type"===b?d[a]={...d[a],healthCheck:{...d[a].healthCheck,[b]:c}}:d[a]={...d[a],healthCheck:{...d[a].healthCheck,[b]:"string"==typeof c?c:parseInt(String(c),10)||0}},C({...B,taskGroups:d})},addTaskGroup:()=>{if(!B)return;let a={...j.defaultTaskGroupData,name:`${B.name?B.name+"-":""}group-${B.taskGroups.length+1}`};C({...B,taskGroups:[...B.taskGroups,a]})},removeTaskGroup:a=>{if(!B||B.taskGroups.length<=1)return;let b=[...B.taskGroups];b.splice(a,1),C({...B,taskGroups:b})},handleSubmit:F}}(a,d);return u?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):x&&!s?(0,b.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,b.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,b.jsx)("span",{className:"block sm:inline",children:x}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(k.default,{href:`/jobs/${a}?namespace=${d}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Job"})})]}):s?(0,b.jsxs)(l.default,{title:`Edit Job: ${s.name}`,error:x||void 0,success:y||void 0,isLoading:v,onSubmit:N,submitButtonText:"Save Changes",cancelHref:`/jobs/${a}?namespace=${d}`,children:[(0,b.jsx)(p.default,{id:"name",name:"name",label:"Job Name",type:"text",value:s.name,onChange:A,disabled:!0,helpText:"Job name cannot be changed after creation.",className:"bg-gray-100 cursor-not-allowed"}),(0,b.jsx)(p.default,{id:"namespace",name:"namespace",label:"Namespace",type:"text",value:s.namespace,onChange:A,disabled:!0,className:"bg-gray-100 cursor-not-allowed"}),(0,b.jsx)(m.default,{taskGroups:s.taskGroups,jobName:s.name,namespace:s.namespace,isLoading:v,onAddTaskGroup:L,onGroupInputChange:B,onGroupCheckboxChange:D,onEnvVarChange:E,onAddEnvVar:F,onRemoveEnvVar:G,onPortChange:H,onAddPort:I,onRemovePort:J,onHealthCheckChange:K,onRemoveTaskGroup:M}),(0,b.jsx)(o.default,{showAdvancedSettings:q,setShowAdvancedSettings:r}),q&&(0,b.jsx)(n.default,{datacenters:s.datacenters,onInputChange:A,isLoading:v})]}):(0,b.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[(0,b.jsx)("span",{className:"block sm:inline",children:"No job data available."}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(k.default,{href:"/jobs",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Jobs"})})]})};function r(){let a=(0,c.useParams)(),e=(0,c.useSearchParams)(),f=a.id,g=e.get("namespace")||"default";return(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Edit Job"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Update job configuration"})]}),(0,b.jsx)("div",{children:(0,b.jsx)(k.default,{href:`/jobs/${f}?namespace=${g}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Job"})})]}),(0,b.jsx)(q,{jobId:f,namespace:g})]})})}a.s(["default",()=>r],71558)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a45a3c4d._.js.map